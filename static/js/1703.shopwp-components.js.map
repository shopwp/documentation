{"version":3,"file":"1703.shopwp-components.js","mappings":"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","sources":["webpack://shopwpComponents/./src/common/icons/icon-decrement.jsx","webpack://shopwpComponents/./src/common/icons/icon-increment.jsx","webpack://shopwpComponents/./src/components/quantity/index.jsx"],"sourcesContent":["/** @jsx jsx */\nimport { jsx, css } from \"@emotion/react\"\nimport { mq } from \"Common/css\"\n\nfunction QuantityDecIcon() {\n  const QuantityDecIconCSS = css`\n    position: relative;\n    content: \"\";\n    display: block;\n    height: 1px;\n    background: black;\n    width: 12px;\n    position: absolute;\n    top: calc(50% - 1px);\n    left: calc(50% - 6px);\n\n    ${mq(\"small\")} {\n      width: 20px;\n      left: calc(50% - 10px);\n    }\n  `\n\n  return (\n    <span\n      css={QuantityDecIconCSS}\n      className=\"wps-quantity-icon wps-quantity-decrement-icon\"\n    />\n  )\n}\n\nexport default QuantityDecIcon\n","/** @jsx jsx */\nimport { jsx, css } from \"@emotion/react\"\nimport { mq } from \"Common/css\"\n\nfunction QuantityIncIcon() {\n  const QuantityIncIconCSS = css`\n    position: relative;\n    display: block;\n    height: 1px;\n    background: black;\n    width: 10px;\n    position: absolute;\n    top: calc(50% - 1px);\n    left: calc(50% - 5px);\n\n    ${mq(\"small\")} {\n      width: 20px;\n      left: calc(50% - 10px);\n    }\n\n    &:after {\n      content: \"\";\n      display: block;\n      height: 1px;\n      transform: rotate(90deg);\n      background: black;\n      width: 10px;\n      position: absolute;\n      top: calc(50% - 0);\n      left: calc(50% - 5px);\n\n      ${mq(\"small\")} {\n        width: 20px;\n        left: calc(50% - 10px);\n      }\n    }\n  `\n\n  return (\n    <span\n      css={QuantityIncIconCSS}\n      className=\"wps-quantity-icon wps-quantity-increment-icon\"\n    />\n  )\n}\n\nexport default QuantityIncIcon\n","/** @jsx jsx */\nimport { jsx, css } from \"@emotion/react\"\nimport { containerFluidCSS, flexRowCSS, mq } from \"Common/css\"\nimport QuantityDecIcon from \"../../common/icons/icon-decrement\"\nimport QuantityIncIcon from \"../../common/icons/icon-increment\"\nimport { useDebounce } from \"use-debounce\"\nimport { useFirstRender } from \"Hooks\"\n\nfunction Quantity({\n  initialQuantity,\n  maxQuantity,\n  minQuantity,\n  quantityStep,\n  dispatch,\n  onChange,\n  small = true,\n  isUpdating = false,\n  lineItem = false,\n  setNotice = false,\n}) {\n  const { useState, useEffect } = wp.element\n  const [quantity, setQuantity] = useState(initialQuantity)\n  const [debouncedQuantity] = useDebounce(parseInt(quantity), 20)\n  const isFirstRender = useFirstRender()\n\n  useEffect(() => {\n    maybeShowInventoryNotice(initialQuantity)\n    setQuantity(initialQuantity)\n  }, [initialQuantity])\n\n  const quantityInputCSS = css`\n    && {\n      margin: 0;\n      width: ${small ? \"40px\" : \"45px\"};\n      height: ${small ? \"40px\" : \"45px\"};\n      border: none;\n      text-align: center;\n      font-size: 18px;\n      margin-right: 0px;\n      border-top: 1px solid #a5a5a5;\n      border-bottom: 1px solid #a5a5a5;\n      max-height: ${small ? \"40px\" : \"45px\"};\n      border-radius: 0;\n      appearance: none;\n      padding: 0;\n      color: #121212;\n      background: white;\n\n      ::-webkit-outer-spin-button,\n      ::-webkit-inner-spin-button {\n        -webkit-appearance: none;\n        margin: 0;\n      }\n\n      /* Firefox */\n      &[type=\"number\"] {\n        -moz-appearance: textfield;\n      }\n\n      &:hover {\n        cursor: ${isUpdating ? \"not-allowed\" : \"text\"};\n      }\n\n      ${mq(\"small\")} {\n        width: 60px;\n        height: 60px;\n        max-height: 60px;\n        font-size: 24px;\n      }\n    }\n  `\n\n  const QuantityIncDecCSS = css`\n    color: #333;\n    display: block;\n    margin-top: 0;\n    position: relative;\n    padding: 0 10px;\n    font-size: 17px;\n    font-family: monospace;\n    background: transparent;\n    box-shadow: none;\n    cursor: pointer;\n    text-align: center;\n    border: 1px solid #a5a5a5;\n    width: ${small ? \"45px\" : \"50px\"};\n    height: ${small ? \"40px\" : \"45px\"};\n    outline: none;\n    outline-offset: 0;\n    transition: all 0.2s ease;\n\n    &:hover {\n      background: #f1f1f1;\n    }\n\n    ${mq(\"small\")} {\n      font-size: 26px;\n      width: 60px;\n      height: 60px;\n    }\n  `\n\n  const QuantityIncCSS = css`\n    border-radius: 0 5px 5px 0;\n\n    &:hover {\n      cursor: pointer;\n      background-color: #f1f1f1;\n    }\n  `\n\n  const QuantityDecCSS = css`\n    border-radius: 5px 0 0 5px;\n\n    &:hover {\n      cursor: ${isUpdating ? \"not-allowed\" : \"pointer\"};\n      background-color: ${isUpdating ? \"white\" : \"#f1f1f1\"};\n    }\n  `\n\n  const quantityContainer = css`\n    width: 122px;\n    margin: 0;\n    background: white;\n\n    ${mq(\"small\")} {\n      width: 100%;\n      min-width: 160px;\n    }\n  `\n\n  function handleQuantityChange(e) {\n    if (isUpdating) {\n      return\n    }\n\n    if (e.target.value || e.target.value === 0) {\n      if (minQuantity && e.target.value <= minQuantity) {\n        var newQuantity = minQuantity\n      } else {\n        var newQuantity = e.target.value\n      }\n\n      maybeShowInventoryNotice(e.target.value)\n      setQuantity(newQuantity)\n    }\n  }\n\n  function handleDecrement() {\n    if (isUpdating) {\n      return\n    }\n\n    dispatch({\n      type: \"SET_NOTICE\",\n      payload: false,\n    })\n\n    maybeShowInventoryNotice(quantity)\n\n    if (!quantityStep) {\n      var newQuantity = quantity - 1\n    } else {\n      var newQuantity = quantity - quantityStep\n    }\n\n    if (!lineItem && newQuantity < 1) {\n      newQuantity = 1\n    }\n\n    maybeShowInventoryNotice(newQuantity)\n    setQuantity(newQuantity)\n  }\n\n  function handleIncrement() {\n    if (isUpdating) {\n      return\n    }\n    dispatch({\n      type: \"SET_NOTICE\",\n      payload: false,\n    })\n\n    if (!quantityStep) {\n      var newQuantity = quantity + 1\n    } else {\n      var newQuantity = quantity + quantityStep\n    }\n\n    maybeShowInventoryNotice(newQuantity)\n    setQuantity(newQuantity)\n  }\n\n  function maybeShowInventoryNotice(newQuantity) {\n    if (maxQuantity && newQuantity > maxQuantity) {\n      // Only show notice for cart line item quantity\n      if (setNotice && lineItem) {\n        if (lineItem.merchandise.quantityAvailable > 0) {\n          setNotice({\n            type: \"warning\",\n            message: wp.i18n.sprintf(\n              wp.i18n.__(\n                \"Warning: the quantity you're trying to purchase may be limited to %d at checkout.\",\n                \"shopwp\"\n              ),\n              lineItem.merchandise.quantityAvailable\n            ),\n          })\n        }\n      }\n    } else {\n      if (setNotice && lineItem) {\n        setNotice(false)\n      }\n    }\n  }\n\n  useEffect(() => {\n    if (isFirstRender) {\n      return\n    }\n\n    onChange(debouncedQuantity, initialQuantity)\n  }, [debouncedQuantity])\n\n  return (\n    <div\n      className=\"wps-quantity-container\"\n      css={[containerFluidCSS, quantityContainer]}\n    >\n      <div css={[flexRowCSS]}>\n        <button\n          className=\"wps-quantity-decrement\"\n          css={[QuantityIncDecCSS, QuantityDecCSS]}\n          type=\"button\"\n          role=\"button\"\n          onClick={handleDecrement}\n        >\n          <QuantityDecIcon />\n        </button>\n\n        <input\n          className=\"wps-quantity-input\"\n          type=\"number\"\n          min={minQuantity > 1 ? minQuantity : 1}\n          onFocus={(e) => e.currentTarget.select()}\n          aria-label=\"Product Quantity Input\"\n          css={quantityInputCSS}\n          value={quantity}\n          onChange={handleQuantityChange}\n          onBlur={handleQuantityChange}\n          disabled={quantityStep}\n        />\n\n        <button\n          className=\"wps-quantity-increment\"\n          css={[QuantityIncDecCSS, QuantityIncCSS]}\n          type=\"button\"\n          role=\"button\"\n          onClick={handleIncrement}\n        >\n          <QuantityIncIcon />\n        </button>\n      </div>\n    </div>\n  )\n}\n\nexport default Quantity\n"],"names":["QuantityDecIconCSS","css","mq","className","QuantityIncIconCSS","initialQuantity","maxQuantity","minQuantity","quantityStep","dispatch","onChange","small","isUpdating","lineItem","setNotice","useState","wp","element","useEffect","quantity","setQuantity","useDebounce","parseInt","debouncedQuantity","isFirstRender","useFirstRender","maybeShowInventoryNotice","quantityInputCSS","QuantityIncDecCSS","QuantityIncCSS","QuantityDecCSS","quantityContainer","handleQuantityChange","e","target","value","newQuantity","merchandise","quantityAvailable","type","message","sprintf","__","containerFluidCSS","flexRowCSS","role","onClick","payload","min","onFocus","currentTarget","select","onBlur","disabled"],"sourceRoot":""}