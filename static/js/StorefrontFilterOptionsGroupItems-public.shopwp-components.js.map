{"version":3,"file":"StorefrontFilterOptionsGroupItems-public.shopwp-components.js","mappings":"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","sources":["webpack://shopwpComponents/./src/components/storefront/options/group-item-value/index.jsx","webpack://shopwpComponents/./src/components/storefront/options/group-items/index.jsx"],"sourcesContent":["import isEmpty from \"lodash/isEmpty\"\nimport some from \"lodash/some\"\nimport { useStorefrontState } from \"../../_state/hooks\"\n\nfunction CheckboxItem({\n  itemValue,\n  itemType,\n  storefrontDispatch,\n  isLoading,\n  initialSelections,\n}) {\n  const { useState, useEffect } = wp.element\n  const [isSelected, setIsSelected] = useState(() => {\n    var stuff = initialSelections[itemType]\n\n    if (itemType === \"collections\") {\n      return\n    }\n\n    if (stuff && stuff.length && itemValue) {\n      return stuff.includes(String(itemValue).toLowerCase())\n    }\n\n    return false\n  })\n  const itemLabel = itemType === \"collections\" ? itemValue.label : itemValue\n\n  const state = useStorefrontState()\n\n  function onClick() {\n    if (isLoading) {\n      return\n    }\n\n    var settingThis = {\n      itemValue: itemValue,\n      itemType: itemType,\n      isSelected: !isSelected,\n    }\n\n    setIsSelected(!isSelected)\n\n    storefrontDispatch({\n      type: \"SET_LAST_SELECTED\",\n      payload: settingThis,\n    })\n  }\n\n  useEffect(() => {\n    if (isEmpty(state.selections)) {\n      setIsSelected(false)\n    }\n\n    if (isEmpty(state.selections[itemType])) {\n      setIsSelected(false)\n    }\n\n    if (itemType === \"collections\") {\n      var found = some(state.selections[itemType], itemValue)\n    } else {\n      if (state.selections[itemType] && itemValue) {\n        if (state.selections[itemType].length) {\n          var found = state.selections[itemType].includes(\n            String(itemValue).toLowerCase()\n          )\n        } else {\n          var found = isSelected\n        }\n      } else {\n        var found = isSelected\n      }\n    }\n\n    if (!found) {\n      setIsSelected(false)\n    }\n  }, [state.selections])\n\n  return (\n    <li\n      data-wps-is-selected={isSelected}\n      data-wps-filter-value={itemLabel}\n      data-wps-display-style=\"checkbox\"\n      className={\"wps-checkbox-wrapper\"}\n    >\n      <label className=\"wps-input-label\">\n        <input\n          type=\"checkbox\"\n          onChange={onClick}\n          disabled={isLoading}\n          checked={isSelected ? \"checked\" : \"\"}\n          className=\"wps-input-value\"\n        />\n\n        {itemLabel && <span>{itemLabel}</span>}\n      </label>\n    </li>\n  )\n}\n\nexport default CheckboxItem\n","import memoize from \"memoize-one\"\nimport CheckboxItem from \"../group-item-value\"\nimport { useStorefrontDispatch, useStorefrontState } from \"../../_state/hooks\"\nimport { useItemsState } from \"../../../items/_state/hooks\"\nimport { useVirtual } from \"react-virtual\"\n\nconst Row = wp.element.memo(({ data, index, size, start }) => {\n  const {\n    filterOptions,\n    itemType,\n    storefrontDispatch,\n    isLoading,\n    initialSelections,\n  } = data\n\n  const itemValue = filterOptions[index]\n\n  return (\n    <div\n      style={{\n        position: \"absolute\",\n        top: 0,\n        left: 0,\n        width: \"100%\",\n        height: `${size}px`,\n        transform: `translateY(${start}px)`,\n      }}\n    >\n      <CheckboxItem\n        itemType={itemType}\n        itemValue={itemValue}\n        storefrontDispatch={storefrontDispatch}\n        isLoading={isLoading}\n        initialSelections={initialSelections}\n      />\n    </div>\n  )\n})\n\nconst createItemData = memoize(\n  (\n    filterOptions,\n    itemType,\n    storefrontDispatch,\n    isLoading,\n    initialSelections\n  ) => ({\n    filterOptions,\n    itemType,\n    storefrontDispatch,\n    isLoading,\n    initialSelections,\n  })\n)\n\nfunction StorefrontFilterOptionsGroupItems({ filterOptions, itemType }) {\n  const storefrontDispatch = useStorefrontDispatch()\n  const storefrontState = useStorefrontState()\n  const { useState } = wp.element\n  const [initialSelections] = useState(storefrontState.selections)\n\n  const itemsState = useItemsState()\n  const itemData = createItemData(\n    filterOptions,\n    itemType,\n    storefrontDispatch,\n    itemsState.isLoading,\n    initialSelections\n  )\n\n  const parentRef = wp.element.useRef()\n\n  const rowVirtualizer = useVirtual({\n    size: filterOptions.length,\n    parentRef,\n    estimateSize: wp.element.useCallback(() => 30, []),\n  })\n\n  return (\n    <ul\n      className={\"wps-\" + itemType}\n      ref={parentRef}\n      className=\"List\"\n      style={{\n        height: `250px`,\n        width: `300px`,\n        overflow: \"auto\",\n      }}\n    >\n      <div\n        className=\"ListInner\"\n        style={{\n          height: `${rowVirtualizer.totalSize}px`,\n          width: \"100%\",\n          position: \"relative\",\n        }}\n      >\n        {rowVirtualizer.virtualItems.map((virtualRow) => (\n          <Row\n            key={virtualRow.index + virtualRow.end}\n            data={itemData}\n            index={virtualRow.index}\n            size={virtualRow.size}\n            start={virtualRow.start}\n          />\n        ))}\n      </div>\n    </ul>\n  )\n}\n\nexport default StorefrontFilterOptionsGroupItems\n"],"names":["isEmpty","some","useStorefrontState","CheckboxItem","itemValue","itemType","storefrontDispatch","isLoading","initialSelections","wp","element","useState","useEffect","stuff","length","includes","String","toLowerCase","isSelected","setIsSelected","itemLabel","label","state","onClick","settingThis","type","payload","selections","found","memoize","useStorefrontDispatch","useItemsState","useVirtual","Row","memo","data","index","size","start","filterOptions","position","top","left","width","height","transform","createItemData","StorefrontFilterOptionsGroupItems","storefrontState","itemsState","itemData","parentRef","useRef","rowVirtualizer","estimateSize","useCallback","overflow","totalSize","virtualItems","map","virtualRow","end"],"sourceRoot":""}