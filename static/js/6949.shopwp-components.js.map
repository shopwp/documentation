{"version":3,"file":"6949.shopwp-components.js","mappings":"0PAKMA,EAA+BC,EAAWC,MAAK,kBACnD,kCAKIC,EAAoCF,EAAWC,MAAK,kBACxD,kCAgFF,UA3EA,YAOG,IANDE,EAMC,EANDA,QACAC,EAKC,EALDA,UACAC,EAIC,EAJDA,QAIC,IAHDC,WAAAA,OAGC,aAFDC,WAAAA,OAEC,SADDC,EACC,EADDA,uBAEQC,GAAwBT,GAAGU,QAAnC,EAAQD,UAAUE,EAAlB,EAAkBA,UAClB,EAA4CF,GAAS,GAArD,eAAOG,EAAP,KAAuBC,EAAvB,KACA,EAA0BJ,GAAS,GAAnC,eAAOK,EAAP,KAAcC,EAAd,KACA,EAA0CN,GAAS,GAAnD,eAAOO,EAAP,KAAsBC,EAAtB,KACA,EAAgDR,EAAS,IAAzD,eAAOS,EAAP,KAAyBC,EAAzB,KAEMC,GAAYC,EAAAA,EAAAA,KAPjB,SAScC,EATd,0EASD,WAAsBC,GAAtB,oFACOA,EADP,qDAKMP,EALN,uBAMIG,EAAoBH,GANxB,iCAUEH,GAAkB,GAVpB,UAY4BW,EAAAA,EAAAA,GAAGrB,EAAQiB,IAZvC,kCAYSK,EAZT,KAYcC,EAZd,KAcEb,GAAkB,KAEZc,GAAeC,EAAAA,EAAAA,IAAoBH,EAAKC,GAAM,IAhBtD,wBAmBIX,EAASY,GAnBb,2BAwBQE,EADFtB,EACeP,EAAS8B,aAAavB,EAAYmB,EAAKK,MAEvCL,EAAKK,KAGxBd,EAAiBY,GACjBV,EAAoBU,GA9BtB,6CATC,sBAgDD,OANAlB,GAAU,WACJL,GACFgB,EAAOhB,KAER,IAGD,gBAACP,EAAD,CACEuB,OAAQA,EACRhB,WAAYA,EACZQ,MAAOA,EACPF,eAAgBA,EAChBR,UAAWA,EACXI,uBAAwBA,EACxBwB,sBAAuBC,GAAAA,CAAQf,GAC/Bb,QAASA,EACT6B,MACE,gBAAChC,EAAD,CACEiC,cAAejB,EACfkB,SAAUhC","sources":["webpack://shopwpComponents/./src/components/storefront/options/option/index.jsx"],"sourcesContent":["import to from \"await-to-js\"\nimport isEmpty from \"lodash/isEmpty\"\nimport { maybeHandleApiError } from \"Api\"\nimport { useShopState } from \"../../../shop/_state/hooks\"\n\nconst StorefrontFilterOptionsGroup = wp.element.lazy(() =>\n  import(\n    /* webpackChunkName: 'StorefrontFilterOptionsGroup-public' */ \"../group\"\n  )\n)\n\nconst StorefrontFilterOptionsGroupItems = wp.element.lazy(() =>\n  import(\n    /* webpackChunkName: 'StorefrontFilterOptionsGroupItems-public' */ \"../group-items\"\n  )\n)\n\nfunction StorefrontFilterOptionsGroupOption({\n  queryFn,\n  groupType,\n  heading,\n  openOnLoad = false,\n  filterName = false,\n  noFilterGroupFoundText,\n}) {\n  const { useState, useEffect } = wp.element\n  const [isLoadingItems, setIsLoadingItems] = useState(true)\n  const [error, setError] = useState(false)\n  const [existingItems, setExistingItems] = useState(false)\n  const [filterableValues, setFilterableValues] = useState([])\n\n  const shopState = useShopState()\n\n  async function onOpen(isOpen) {\n    if (!isOpen) {\n      return\n    }\n\n    if (existingItems) {\n      setFilterableValues(existingItems)\n      return\n    }\n\n    setIsLoadingItems(true)\n\n    const [err, resp] = await to(queryFn(shopState))\n\n    setIsLoadingItems(false)\n\n    const errorMessage = maybeHandleApiError(err, resp, false)\n\n    if (errorMessage) {\n      setError(errorMessage)\n      return\n    }\n\n    if (filterName) {\n      var filterData = wp.hooks.applyFilters(filterName, resp.data)\n    } else {\n      var filterData = resp.data\n    }\n\n    setExistingItems(filterData)\n    setFilterableValues(filterData)\n  }\n\n  useEffect(() => {\n    if (openOnLoad) {\n      onOpen(openOnLoad)\n    }\n  }, [])\n\n  return (\n    <StorefrontFilterOptionsGroup\n      onOpen={onOpen}\n      openOnLoad={openOnLoad}\n      error={error}\n      isLoadingItems={isLoadingItems}\n      groupType={groupType}\n      noFilterGroupFoundText={noFilterGroupFoundText}\n      areFilterOptionsEmpty={isEmpty(filterableValues)}\n      heading={heading}\n      items={\n        <StorefrontFilterOptionsGroupItems\n          filterOptions={filterableValues}\n          itemType={groupType}\n        />\n      }\n    />\n  )\n}\n\nexport default StorefrontFilterOptionsGroupOption\n"],"names":["StorefrontFilterOptionsGroup","wp","lazy","StorefrontFilterOptionsGroupItems","queryFn","groupType","heading","openOnLoad","filterName","noFilterGroupFoundText","useState","element","useEffect","isLoadingItems","setIsLoadingItems","error","setError","existingItems","setExistingItems","filterableValues","setFilterableValues","shopState","useShopState","onOpen","isOpen","to","err","resp","errorMessage","maybeHandleApiError","filterData","applyFilters","data","areFilterOptionsEmpty","isEmpty","items","filterOptions","itemType"],"sourceRoot":""}