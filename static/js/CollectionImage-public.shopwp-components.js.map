{"version":3,"file":"CollectionImage-public.shopwp-components.js","mappings":"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","sources":["webpack://shopwpComponents/./src/common/images/index.js","webpack://shopwpComponents/./src/components/collections/collection/_state/hooks.js","webpack://shopwpComponents/./src/components/collections/collection/image/index.jsx"],"sourcesContent":["function isInt(val) {\n\treturn Number.isInteger(val)\n}\n\nfunction isString(val) {\n\treturn typeof val === 'string' || val instanceof String\n}\n\nfunction explode(value, delimiter) {\n\treturn value.split(delimiter)\n}\n\nfunction getExtension(path) {\n\tif (!path) {\n\t\treturn\n\t}\n\n\tvar first = path.split('.')\n\n\tvar second = first[first.length - 1]\n\n\tvar third = second.split('?')[0]\n\n\treturn third\n}\n\n/*\n\nResponsible for splitting image into parts\n\n*/\nfunction splitFromExtension(imageUrl, extension) {\n\tvar delimiter = '.' + extension\n\n\treturn explode(imageUrl, delimiter)\n}\n\n/*\n\nResponsible for building width and height filter\n\n*/\nfunction buildWidthHeightFilter(width = 0, height = 0) {\n\tif (!isInt(width) || width < 0) {\n\t\twidth = 0\n\t}\n\n\tif (!isInt(height) || height < 0) {\n\t\theight = 0\n\t}\n\n\t// Both set\n\tif (width !== 0 && height !== 0) {\n\t\treturn '_' + width + 'x' + height\n\t}\n\n\t// Only width set\n\tif (height === 0 && width !== 0) {\n\t\treturn '_' + width + 'x'\n\t}\n\n\t// Only height set\n\tif (width === 0 && height !== 0) {\n\t\treturn '_x' + height\n\t}\n\n\treturn ''\n}\n\n/*\n\nResponsible for taking an $imageUrl and returning its parts.\n\n*/\nfunction splitImageUrl(imageUrl) {\n\tlet extension = getExtension(imageUrl)\n\n\tif (!extension) {\n\t\treturn false\n\t}\n\n\tlet imageParts = splitFromExtension(imageUrl, extension)\n\n\treturn {\n\t\textension: extension,\n\t\tbeforeExtension: imageParts[0],\n\t\tafterExtension: imageParts[1],\n\t}\n}\n\n/*\n\nResponsible for taking a $crop value and returning the URL string version.\n\nEmpty string is no $crop set\n\n*/\nfunction buildCropFilter(crop = '') {\n\tif (!crop || !isString(crop) || crop === 'none') {\n\t\treturn ''\n\t}\n\n\treturn '_crop_' + crop\n}\n\n/*\n\nResponsible for taking a $scale value and returning the URL string version.\n\nEmpty string is no $scale set\n\n*/\nfunction buildScaleFilter(scale = 0) {\n\tif (!scale || !isInt(scale) || scale <= 1 || scale > 3) {\n\t\treturn ''\n\t}\n\n\treturn '@' + scale + 'x'\n}\n\n/*\n\nResponsible for adding width and height filter to image URL\n\n*/\nfunction addCustomSizeToImageUrl(width, height, imageUrl) {\n\tlet splitParts = splitImageUrl(imageUrl)\n\n\tif (splitParts === false) {\n\t\treturn imageUrl\n\t}\n\n\treturn (\n\t\tsplitParts.beforeExtension +\n\t\tbuildWidthHeightFilter(width, height) +\n\t\t'.' +\n\t\tsplitParts.extension +\n\t\tsplitParts.afterExtension\n\t)\n}\n\nfunction autoWidthAndHeight(settings) {\n\tif (settings.width) {\n\t\treturn settings.width === 0 && settings.height === 0\n\t}\n\n\treturn true\n}\n\n/*\n\nResponsible for adding crop filter to image URL\n\n*/\nfunction addCustomCropToImageUrl(settings, imageUrl) {\n\tlet splitParts = splitImageUrl(imageUrl)\n\n\tif (splitParts === false || !settings.crop || autoWidthAndHeight(settings)) {\n\t\treturn imageUrl\n\t}\n\n\treturn (\n\t\tsplitParts.beforeExtension +\n\t\tbuildCropFilter(settings.crop) +\n\t\t'.' +\n\t\tsplitParts.extension +\n\t\tsplitParts.afterExtension\n\t)\n}\n\n/*\n\nResponsible for adding scale filter to image URL\n\n*/\nfunction addCustomScaleToImageUrl(settings, imageUrl) {\n\tlet splitParts = splitImageUrl(imageUrl)\n\n\tif (splitParts === false || settings.scale <= 1 || settings.scale > 3) {\n\t\treturn imageUrl\n\t}\n\n\treturn (\n\t\tsplitParts.beforeExtension +\n\t\tbuildScaleFilter(settings.scale) +\n\t\t'.' +\n\t\tsplitParts.extension +\n\t\tsplitParts.afterExtension\n\t)\n}\n\nfunction isPlaceholder(src) {\n\tif (!src) {\n\t\treturn false\n\t}\n\n\treturn src.includes('cdn.shopify.com/s/files/1/0533/2089/files/placeholder')\n}\n\n/*\n\n$settings is an array with this structure:\n\n[\n   'src'\t\t\t=> 'https://domain.com/s/files/1/1405/0664.jpg',\n   'width'\t\t=> 300\n   'height'\t=> 0\n   'crop'\t\t=> 'none'\n   'scale'\t\t=> 0\n]\n\n*/\nfunction addCustomSizingToImageUrl(settings) {\n\tif (settings.src && isPlaceholder(settings.src)) {\n\t\treturn settings.src\n\t}\n\n\t// Returns a modified image URL\n\treturn addCustomScaleToImageUrl(\n\t\tsettings,\n\t\taddCustomCropToImageUrl(\n\t\t\tsettings,\n\t\t\taddCustomSizeToImageUrl(settings.width, settings.height, settings.src)\n\t\t)\n\t)\n}\n\nfunction doFeaturedSizing(src, settings) {\n\tif (!settings) {\n\t\treturn src\n\t}\n\n\treturn addCustomSizingToImageUrl({\n\t\tsrc: src,\n\t\twidth: settings.imagesSizingWidth,\n\t\theight: settings.imagesSizingHeight,\n\t\tcrop: settings.imagesSizingCrop,\n\t\tscale: settings.imagesSizingScale,\n\t})\n}\n\nfunction doThumbnailSizing(src, settings) {\n\tif (!settings) {\n\t\treturn src\n\t}\n\treturn addCustomSizingToImageUrl({\n\t\tsrc: src,\n\t\twidth: settings.thumbnailImagesSizingWidth,\n\t\theight: settings.thumbnailImagesSizingHeight,\n\t\tcrop: settings.thumbnailImagesSizingCrop,\n\t\tscale: settings.thumbnailImagesSizingScale,\n\t})\n}\n\nfunction getMediaInfo(image) {\n\tvar media = {\n\t\tid: '',\n\t\tdata: false,\n\t}\n\n\tswitch (image.node.mediaContentType) {\n\t\tcase 'IMAGE':\n\t\t\tmedia.id = image.node.image.id\n\t\t\tmedia.data = image.node.image\n\n\t\t\tbreak\n\t\tcase 'VIDEO':\n\t\t\tmedia.id = image.node.previewImage.id\n\t\t\tmedia.data = image.node\n\n\t\t\tbreak\n\n\t\tcase 'EXTERNAL_VIDEO':\n\t\t\tmedia.id = image.node.id\n\t\t\tmedia.data = image.node\n\n\t\t\tbreak\n\n\t\tdefault:\n\t\t\tbreak\n\t}\n\n\treturn media\n}\n\nexport {\n\tsplitFromExtension,\n\tbuildWidthHeightFilter,\n\tsplitImageUrl,\n\tbuildCropFilter,\n\tbuildScaleFilter,\n\taddCustomSizeToImageUrl,\n\tautoWidthAndHeight,\n\taddCustomCropToImageUrl,\n\taddCustomScaleToImageUrl,\n\taddCustomSizingToImageUrl,\n\tdoFeaturedSizing,\n\tdoThumbnailSizing,\n\tgetMediaInfo,\n}\n","import { CollectionStateContext, CollectionDispatchContext } from \"./context\"\n\nfunction useCollectionState() {\n  const context = wp.element.useContext(CollectionStateContext)\n\n  if (!context) {\n    throw new Error(\n      \"useCollectionState must be used within the CollectionProvider\"\n    )\n  }\n\n  return context\n}\n\nfunction useCollectionDispatch() {\n  const context = wp.element.useContext(CollectionDispatchContext)\n\n  if (!context) {\n    throw new Error(\n      \"useCollectionDispatch must be used within the CollectionProvider\"\n    )\n  }\n\n  return context\n}\n\nexport { useCollectionState, useCollectionDispatch }\n","/** @jsx jsx */\nimport { jsx, css } from \"@emotion/react\"\nimport { usePortal } from \"Hooks\"\nimport { addCustomSizingToImageUrl } from \"Common/images\"\nimport { findPortalElement } from \"Utils\"\nimport { useItemsState } from \"../../../items/_state/hooks\"\nimport { useCollectionState } from \"../_state/hooks\"\n\nconst Link = wp.element.lazy(() =>\n  import(/* webpackChunkName: 'Link-public' */ \"../../../link\")\n)\n\nfunction CollectionImage() {\n  const { useState, useEffect } = wp.element\n  const itemsState = useItemsState()\n  const collectionState = useCollectionState()\n\n  const [imageSrc, setImageSrc] = useState(() => {\n    return collectionState.payload.image\n      ? collectionState.payload.image.originalSrc\n      : false\n  })\n\n  useEffect(() => {\n    if (!imageSrc) {\n      return\n    }\n\n    if (collectionState.imagesSizingToggle) {\n      setImageSrc(\n        addCustomSizingToImageUrl({\n          src: collectionState.payload.image.originalSrc,\n          width: collectionState.imagesSizingWidth,\n          height: collectionState.imagesSizingHeight,\n          crop: collectionState.imagesSizingCrop,\n          scale: collectionState.imagesSizingScale,\n        })\n      )\n    }\n  }, [])\n\n  const CollectionImageWrapperCSS = css`\n    margin-bottom: 20px;\n    max-width: 400px;\n  `\n\n  const CollectionImageCSS = css`\n    max-width: 100%;\n  `\n\n  return usePortal(\n    imageSrc ? (\n      <div\n        className=\"wps-component wps-component-collection-image\"\n        aria-label=\"Collection Image\"\n        css={CollectionImageWrapperCSS}\n      >\n        <Link\n          type=\"collections\"\n          payload={collectionState.payload}\n          linkTo={itemsState.settings.linkTo}\n          target={itemsState.settings.linkTarget}\n        >\n          <img\n            itemProp=\"image\"\n            src={imageSrc}\n            className=\"wps-product-image\"\n            css={CollectionImageCSS}\n            alt={\n              collectionState.payload.image\n                ? collectionState.payload.image.altText\n                : \"\"\n            }\n            loading=\"lazy\"\n          />\n        </Link>\n      </div>\n    ) : null,\n    findPortalElement(itemsState.settings.dropzoneCollectionImage)\n  )\n}\n\nexport default CollectionImage\n"],"names":["isInt","val","Number","isInteger","isString","String","explode","value","delimiter","split","getExtension","path","first","second","length","third","splitFromExtension","imageUrl","extension","buildWidthHeightFilter","width","height","splitImageUrl","imageParts","beforeExtension","afterExtension","buildCropFilter","crop","buildScaleFilter","scale","addCustomSizeToImageUrl","splitParts","autoWidthAndHeight","settings","addCustomCropToImageUrl","addCustomScaleToImageUrl","isPlaceholder","src","includes","addCustomSizingToImageUrl","doFeaturedSizing","imagesSizingWidth","imagesSizingHeight","imagesSizingCrop","imagesSizingScale","doThumbnailSizing","thumbnailImagesSizingWidth","thumbnailImagesSizingHeight","thumbnailImagesSizingCrop","thumbnailImagesSizingScale","getMediaInfo","image","media","id","data","node","mediaContentType","previewImage","CollectionStateContext","CollectionDispatchContext","useCollectionState","context","wp","element","useContext","Error","useCollectionDispatch","jsx","css","usePortal","findPortalElement","useItemsState","Link","lazy","CollectionImage","useState","useEffect","itemsState","collectionState","payload","originalSrc","imageSrc","setImageSrc","imagesSizingToggle","CollectionImageWrapperCSS","CollectionImageCSS","linkTo","linkTarget","altText","dropzoneCollectionImage"],"sourceRoot":""}