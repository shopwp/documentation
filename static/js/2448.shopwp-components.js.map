{"version":3,"file":"2448.shopwp-components.js","mappings":"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","sources":["webpack://shopwpComponents/./src/common/images/index.js","webpack://shopwpComponents/./src/components/collections/collection/_state/hooks.js","webpack://shopwpComponents/./src/components/collections/collection/image/index.jsx"],"sourcesContent":["function isInt(val) {\n\treturn Number.isInteger(val)\n}\n\nfunction isString(val) {\n\treturn typeof val === 'string' || val instanceof String\n}\n\nfunction explode(value, delimiter) {\n\treturn value.split(delimiter)\n}\n\nfunction getExtension(path) {\n\tif (!path) {\n\t\treturn\n\t}\n\n\tvar first = path.split('.')\n\n\tvar second = first[first.length - 1]\n\n\tvar third = second.split('?')[0]\n\n\treturn third\n}\n\n/*\n\nResponsible for splitting image into parts\n\n*/\nfunction splitFromExtension(imageUrl, extension) {\n\tvar delimiter = '.' + extension\n\n\treturn explode(imageUrl, delimiter)\n}\n\n/*\n\nResponsible for building width and height filter\n\n*/\nfunction buildWidthHeightFilter(width = 0, height = 0) {\n\tif (!isInt(width) || width < 0) {\n\t\twidth = 0\n\t}\n\n\tif (!isInt(height) || height < 0) {\n\t\theight = 0\n\t}\n\n\t// Both set\n\tif (width !== 0 && height !== 0) {\n\t\treturn '_' + width + 'x' + height\n\t}\n\n\t// Only width set\n\tif (height === 0 && width !== 0) {\n\t\treturn '_' + width + 'x'\n\t}\n\n\t// Only height set\n\tif (width === 0 && height !== 0) {\n\t\treturn '_x' + height\n\t}\n\n\treturn ''\n}\n\n/*\n\nResponsible for taking an $imageUrl and returning its parts.\n\n*/\nfunction splitImageUrl(imageUrl) {\n\tlet extension = getExtension(imageUrl)\n\n\tif (!extension) {\n\t\treturn false\n\t}\n\n\tlet imageParts = splitFromExtension(imageUrl, extension)\n\n\treturn {\n\t\textension: extension,\n\t\tbeforeExtension: imageParts[0],\n\t\tafterExtension: imageParts[1],\n\t}\n}\n\n/*\n\nResponsible for taking a $crop value and returning the URL string version.\n\nEmpty string is no $crop set\n\n*/\nfunction buildCropFilter(crop = '') {\n\tif (!crop || !isString(crop) || crop === 'none') {\n\t\treturn ''\n\t}\n\n\treturn '_crop_' + crop\n}\n\n/*\n\nResponsible for taking a $scale value and returning the URL string version.\n\nEmpty string is no $scale set\n\n*/\nfunction buildScaleFilter(scale = 0) {\n\tif (!scale || !isInt(scale) || scale <= 1 || scale > 3) {\n\t\treturn ''\n\t}\n\n\treturn '@' + scale + 'x'\n}\n\n/*\n\nResponsible for adding width and height filter to image URL\n\n*/\nfunction addCustomSizeToImageUrl(width, height, imageUrl) {\n\tlet splitParts = splitImageUrl(imageUrl)\n\n\tif (splitParts === false) {\n\t\treturn imageUrl\n\t}\n\n\treturn (\n\t\tsplitParts.beforeExtension +\n\t\tbuildWidthHeightFilter(width, height) +\n\t\t'.' +\n\t\tsplitParts.extension +\n\t\tsplitParts.afterExtension\n\t)\n}\n\nfunction autoWidthAndHeight(settings) {\n\tif (settings.width) {\n\t\treturn settings.width === 0 && settings.height === 0\n\t}\n\n\treturn true\n}\n\n/*\n\nResponsible for adding crop filter to image URL\n\n*/\nfunction addCustomCropToImageUrl(settings, imageUrl) {\n\tlet splitParts = splitImageUrl(imageUrl)\n\n\tif (splitParts === false || !settings.crop || autoWidthAndHeight(settings)) {\n\t\treturn imageUrl\n\t}\n\n\treturn (\n\t\tsplitParts.beforeExtension +\n\t\tbuildCropFilter(settings.crop) +\n\t\t'.' +\n\t\tsplitParts.extension +\n\t\tsplitParts.afterExtension\n\t)\n}\n\n/*\n\nResponsible for adding scale filter to image URL\n\n*/\nfunction addCustomScaleToImageUrl(settings, imageUrl) {\n\tlet splitParts = splitImageUrl(imageUrl)\n\n\tif (splitParts === false || settings.scale <= 1 || settings.scale > 3) {\n\t\treturn imageUrl\n\t}\n\n\treturn (\n\t\tsplitParts.beforeExtension +\n\t\tbuildScaleFilter(settings.scale) +\n\t\t'.' +\n\t\tsplitParts.extension +\n\t\tsplitParts.afterExtension\n\t)\n}\n\nfunction isPlaceholder(src) {\n\tif (!src) {\n\t\treturn false\n\t}\n\n\treturn src.includes('cdn.shopify.com/s/files/1/0533/2089/files/placeholder')\n}\n\n/*\n\n$settings is an array with this structure:\n\n[\n   'src'\t\t\t=> 'https://domain.com/s/files/1/1405/0664.jpg',\n   'width'\t\t=> 300\n   'height'\t=> 0\n   'crop'\t\t=> 'none'\n   'scale'\t\t=> 0\n]\n\n*/\nfunction addCustomSizingToImageUrl(settings) {\n\tif (settings.src && isPlaceholder(settings.src)) {\n\t\treturn settings.src\n\t}\n\n\t// Returns a modified image URL\n\treturn addCustomScaleToImageUrl(\n\t\tsettings,\n\t\taddCustomCropToImageUrl(\n\t\t\tsettings,\n\t\t\taddCustomSizeToImageUrl(settings.width, settings.height, settings.src)\n\t\t)\n\t)\n}\n\nfunction doFeaturedSizing(src, settings) {\n\tif (!settings) {\n\t\treturn src\n\t}\n\n\treturn addCustomSizingToImageUrl({\n\t\tsrc: src,\n\t\twidth: settings.imagesSizingWidth,\n\t\theight: settings.imagesSizingHeight,\n\t\tcrop: settings.imagesSizingCrop,\n\t\tscale: settings.imagesSizingScale,\n\t})\n}\n\nfunction doThumbnailSizing(src, settings) {\n\tif (!settings) {\n\t\treturn src\n\t}\n\treturn addCustomSizingToImageUrl({\n\t\tsrc: src,\n\t\twidth: settings.thumbnailImagesSizingWidth,\n\t\theight: settings.thumbnailImagesSizingHeight,\n\t\tcrop: settings.thumbnailImagesSizingCrop,\n\t\tscale: settings.thumbnailImagesSizingScale,\n\t})\n}\n\nfunction getMediaInfo(image) {\n\tvar media = {\n\t\tid: '',\n\t\tdata: false,\n\t}\n\n\tswitch (image.node.mediaContentType) {\n\t\tcase 'IMAGE':\n\t\t\tmedia.id = image.node.image.id\n\t\t\tmedia.data = image.node.image\n\n\t\t\tbreak\n\t\tcase 'VIDEO':\n\t\t\tmedia.id = image.node.previewImage.id\n\t\t\tmedia.data = image.node\n\n\t\t\tbreak\n\n\t\tcase 'EXTERNAL_VIDEO':\n\t\t\tmedia.id = image.node.id\n\t\t\tmedia.data = image.node\n\n\t\t\tbreak\n\n\t\tdefault:\n\t\t\tbreak\n\t}\n\n\treturn media\n}\n\nexport {\n\tsplitFromExtension,\n\tbuildWidthHeightFilter,\n\tsplitImageUrl,\n\tbuildCropFilter,\n\tbuildScaleFilter,\n\taddCustomSizeToImageUrl,\n\tautoWidthAndHeight,\n\taddCustomCropToImageUrl,\n\taddCustomScaleToImageUrl,\n\taddCustomSizingToImageUrl,\n\tdoFeaturedSizing,\n\tdoThumbnailSizing,\n\tgetMediaInfo,\n}\n","import { CollectionStateContext, CollectionDispatchContext } from \"./context\"\n\nfunction useCollectionState() {\n  const context = wp.element.useContext(CollectionStateContext)\n\n  if (!context) {\n    throw new Error(\n      \"useCollectionState must be used within the CollectionProvider\"\n    )\n  }\n\n  return context\n}\n\nfunction useCollectionDispatch() {\n  const context = wp.element.useContext(CollectionDispatchContext)\n\n  if (!context) {\n    throw new Error(\n      \"useCollectionDispatch must be used within the CollectionProvider\"\n    )\n  }\n\n  return context\n}\n\nexport { useCollectionState, useCollectionDispatch }\n","/** @jsx jsx */\nimport { jsx, css } from \"@emotion/react\"\nimport { usePortal } from \"Hooks\"\nimport { addCustomSizingToImageUrl } from \"Common/images\"\nimport { findPortalElement } from \"Utils\"\nimport { useItemsState } from \"../../../items/_state/hooks\"\nimport { useCollectionState } from \"../_state/hooks\"\n\nconst Link = wp.element.lazy(() =>\n  import(/* webpackChunkName: 'Link-public' */ \"../../../link\")\n)\n\nfunction CollectionImage() {\n  const { useState, useEffect } = wp.element\n  const itemsState = useItemsState()\n  const collectionState = useCollectionState()\n\n  const [imageSrc, setImageSrc] = useState(() => {\n    return collectionState.payload.image\n      ? collectionState.payload.image.originalSrc\n      : false\n  })\n\n  useEffect(() => {\n    if (!imageSrc) {\n      return\n    }\n\n    if (collectionState.imagesSizingToggle) {\n      setImageSrc(\n        addCustomSizingToImageUrl({\n          src: collectionState.payload.image.originalSrc,\n          width: collectionState.imagesSizingWidth,\n          height: collectionState.imagesSizingHeight,\n          crop: collectionState.imagesSizingCrop,\n          scale: collectionState.imagesSizingScale,\n        })\n      )\n    }\n  }, [])\n\n  const CollectionImageWrapperCSS = css`\n    margin-bottom: 20px;\n    max-width: 400px;\n  `\n\n  const CollectionImageCSS = css`\n    max-width: 100%;\n  `\n\n  return usePortal(\n    imageSrc ? (\n      <div\n        className=\"wps-component wps-component-collection-image\"\n        aria-label=\"Collection Image\"\n        css={CollectionImageWrapperCSS}\n      >\n        <Link\n          type=\"collections\"\n          payload={collectionState.payload}\n          linkTo={itemsState.settings.linkTo}\n          target={itemsState.settings.linkTarget}\n        >\n          <img\n            itemProp=\"image\"\n            src={imageSrc}\n            className=\"wps-product-image\"\n            css={CollectionImageCSS}\n            alt={\n              collectionState.payload.image\n                ? collectionState.payload.image.altText\n                : \"\"\n            }\n            loading=\"lazy\"\n          />\n        </Link>\n      </div>\n    ) : null,\n    findPortalElement(itemsState.settings.dropzoneCollectionImage)\n  )\n}\n\nexport default CollectionImage\n"],"names":["isInt","val","Number","isInteger","isString","String","splitImageUrl","imageUrl","extension","path","first","split","length","getExtension","imageParts","delimiter","splitFromExtension","beforeExtension","afterExtension","addCustomSizingToImageUrl","settings","src","includes","splitParts","scale","buildScaleFilter","addCustomScaleToImageUrl","crop","width","height","autoWidthAndHeight","buildCropFilter","addCustomCropToImageUrl","buildWidthHeightFilter","doFeaturedSizing","imagesSizingWidth","imagesSizingHeight","imagesSizingCrop","imagesSizingScale","doThumbnailSizing","thumbnailImagesSizingWidth","thumbnailImagesSizingHeight","thumbnailImagesSizingCrop","thumbnailImagesSizingScale","getMediaInfo","image","media","id","data","node","mediaContentType","previewImage","useCollectionState","context","wp","useContext","CollectionStateContext","Error","useCollectionDispatch","CollectionDispatchContext","Link","lazy","element","useState","useEffect","itemsState","useItemsState","collectionState","payload","originalSrc","imageSrc","setImageSrc","imagesSizingToggle","CollectionImageWrapperCSS","CollectionImageCSS","usePortal","className","css","type","linkTo","target","linkTarget","itemProp","alt","altText","loading","findPortalElement","dropzoneCollectionImage"],"sourceRoot":""}