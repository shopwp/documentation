{"version":3,"file":"StorefrontFilterOptionsGroupOption-public.shopwp-components.js","mappings":"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","sources":["webpack://shopwpComponents/./src/components/storefront/options/option/index.jsx"],"sourcesContent":["import to from \"await-to-js\"\nimport isEmpty from \"lodash/isEmpty\"\nimport { maybeHandleApiError } from \"Api\"\n\nconst StorefrontFilterOptionsGroup = wp.element.lazy(() =>\n  import(\n    /* webpackChunkName: 'StorefrontFilterOptionsGroup-public' */ \"../group\"\n  )\n)\n\nconst StorefrontFilterOptionsGroupItems = wp.element.lazy(() =>\n  import(\n    /* webpackChunkName: 'StorefrontFilterOptionsGroupItems-public' */ \"../group-items\"\n  )\n)\n\nfunction StorefrontFilterOptionsGroupOption({\n  queryFn,\n  groupType,\n  heading,\n  openOnLoad = false,\n  filterName = false,\n  noFilterGroupFoundText,\n}) {\n  const { useState, useEffect } = wp.element\n  const [isLoadingItems, setIsLoadingItems] = useState(true)\n  const [error, setError] = useState(false)\n  const [existingItems, setExistingItems] = useState(false)\n  const [filterableValues, setFilterableValues] = useState([])\n\n  async function onOpen(isOpen) {\n    if (!isOpen) {\n      return\n    }\n\n    if (existingItems) {\n      setFilterableValues(existingItems)\n      return\n    }\n\n    setIsLoadingItems(true)\n\n    const [err, resp] = await to(queryFn())\n\n    setIsLoadingItems(false)\n\n    const errorMessage = maybeHandleApiError(err, resp, false)\n\n    if (errorMessage) {\n      setError(errorMessage)\n      return\n    }\n\n    if (filterName) {\n      var filterData = wp.hooks.applyFilters(filterName, resp.data)\n    } else {\n      var filterData = resp.data\n    }\n\n    setExistingItems(filterData)\n    setFilterableValues(filterData)\n  }\n\n  useEffect(() => {\n    if (openOnLoad) {\n      onOpen(openOnLoad)\n    }\n  }, [])\n\n  return (\n    <StorefrontFilterOptionsGroup\n      onOpen={onOpen}\n      openOnLoad={openOnLoad}\n      error={error}\n      isLoadingItems={isLoadingItems}\n      groupType={groupType}\n      noFilterGroupFoundText={noFilterGroupFoundText}\n      areFilterOptionsEmpty={isEmpty(filterableValues)}\n      heading={heading}\n      items={\n        <StorefrontFilterOptionsGroupItems\n          filterOptions={filterableValues}\n          itemType={groupType}\n        />\n      }\n    />\n  )\n}\n\nexport default StorefrontFilterOptionsGroupOption\n"],"names":["to","isEmpty","maybeHandleApiError","StorefrontFilterOptionsGroup","wp","element","lazy","StorefrontFilterOptionsGroupItems","StorefrontFilterOptionsGroupOption","queryFn","groupType","heading","openOnLoad","filterName","noFilterGroupFoundText","useState","useEffect","isLoadingItems","setIsLoadingItems","error","setError","existingItems","setExistingItems","filterableValues","setFilterableValues","onOpen","isOpen","err","resp","errorMessage","filterData","hooks","applyFilters","data"],"sourceRoot":""}