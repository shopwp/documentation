(self.webpackChunkshopwpComponents=self.webpackChunkshopwpComponents||[]).push([[3143],{1511:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return D}});var r=n(4942),i=n(885),a=n(845),s=n(1609),o=n.n(s),c=n(9704),u=n.n(c),l=n(3444),f=n(4639),d=n(4639),v=function(e){var t=e.itemValue,n=e.itemType,r=e.storefrontDispatch,a=e.isLoading,s=e.initialSelections,c=(wp.element,f.useState),v=f.useEffect,p=c((function(){var e=s[n];if("collections"!==n)return!!(e&&e.length&&t)&&e.includes(String(t).toLowerCase())})),h=(0,i.Z)(p,2),m=h[0],g=h[1],b="collections"===n?t.label:t,w=(0,l.f)();return v((function(){if(o()(w.selections)&&g(!1),o()(w.selections[n])&&g(!1),"collections"===n)var e=u()(w.selections[n],t);else e=w.selections[n]&&t&&w.selections[n].length?w.selections[n].includes(String(t).toLowerCase()):m;e||g(!1)}),[w.selections]),d.createElement("li",{"data-wps-is-selected":m,"data-wps-filter-value":b,"data-wps-display-style":"checkbox",className:"wps-checkbox-wrapper"},d.createElement("label",{className:"wps-input-label"},d.createElement("input",{type:"checkbox",onChange:function(){if(!a){var e={itemValue:t,itemType:n,isSelected:!m};g(!m),r({type:"SET_LAST_SELECTED",payload:e})}},disabled:a,checked:m?"checked":"",className:"wps-input-value"}),b&&d.createElement("span",null,b)))},p=n(2189),h=n(4639);function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m.apply(this,arguments)}var g,b=["bottom","height","left","right","top","width"],w=new Map,y=function e(){var t=[];w.forEach((function(e,n){var r,i,a=n.getBoundingClientRect();r=a,i=e.rect,void 0===r&&(r={}),void 0===i&&(i={}),b.some((function(e){return r[e]!==i[e]}))&&(e.rect=a,t.push(e))})),t.forEach((function(e){e.callbacks.forEach((function(t){return t(e.rect)}))})),g=window.requestAnimationFrame(e)},k="undefined"!=typeof window?h.useLayoutEffect:h.useEffect;function S(e,t){void 0===t&&(t={width:0,height:0});var n=h.useState(e.current),r=n[0],i=n[1],a=h.useReducer(E,t),s=a[0],o=a[1],c=h.useRef(!1);return k((function(){e.current!==r&&i(e.current)})),k((function(){if(r&&!c.current){c.current=!0;var e=r.getBoundingClientRect();o({rect:e})}}),[r]),h.useEffect((function(){if(r){var e,t,n=(e=r,t=function(e){o({rect:e})},{observe:function(){var n=0===w.size;w.has(e)?w.get(e).callbacks.push(t):w.set(e,{rect:void 0,hasRectChanged:!1,callbacks:[t]}),n&&y()},unobserve:function(){var n=w.get(e);if(n){var r=n.callbacks.indexOf(t);r>=0&&n.callbacks.splice(r,1),n.callbacks.length||w.delete(e),w.size||cancelAnimationFrame(g)}}});return n.observe(),function(){n.unobserve()}}}),[r]),s}function E(e,t){var n=t.rect;return e.height!==n.height||e.width!==n.width?n:e}var z=function(){return 50},x=function(e){return e},C=function(e,t){return e[t?"offsetWidth":"offsetHeight"]},O=function(e){for(var t=Math.max(e.start-e.overscan,0),n=Math.min(e.end+e.overscan,e.size-1),r=[],i=t;i<=n;i++)r.push(i);return r};var L=n(4639),R=n(4639),T=L.memo((function(e){var t=e.data,n=e.index,r=e.size,i=e.start,a=t.filterOptions,s=t.itemType,o=t.storefrontDispatch,c=t.isLoading,u=t.initialSelections,l=a[n];return R.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"".concat(r,"px"),transform:"translateY(".concat(i,"px)")}},R.createElement(v,{itemType:s,itemValue:l,storefrontDispatch:o,isLoading:c,initialSelections:u}))})),M=(0,a.default)((function(e,t,n,r,i){return{filterOptions:e,itemType:t,storefrontDispatch:n,isLoading:r,initialSelections:i}})),D=function(e){var t,n=e.filterOptions,a=e.itemType,s=(0,l.D)(),o=(0,l.f)(),c=(0,L.useState)(o.selections),u=(0,i.Z)(c,1)[0],f=(0,p.Q)(),d=M(n,a,s,f.isLoading,u),v=L.useRef(),g=function(e){var t,n=e.size,r=void 0===n?0:n,i=e.estimateSize,a=void 0===i?z:i,s=e.overscan,o=void 0===s?1:s,c=e.paddingStart,u=void 0===c?0:c,l=e.paddingEnd,f=void 0===l?0:l,d=e.parentRef,v=e.horizontal,p=e.scrollToFn,g=e.useObserver,b=e.initialRect,w=e.onScrollElement,y=e.scrollOffsetFn,E=e.keyExtractor,L=void 0===E?x:E,R=e.measureSize,T=void 0===R?C:R,M=e.rangeExtractor,D=void 0===M?O:M,N=v?"width":"height",A=v?"scrollLeft":"scrollTop",F=h.useRef({scrollOffset:0,measurements:[]}),I=h.useState(0),Z=I[0],j=I[1];F.current.scrollOffset=Z;var V=(g||S)(d,b)[N];F.current.outerSize=V;var q=h.useCallback((function(e){d.current&&(d.current[A]=e)}),[d,A]),B=p||q;p=h.useCallback((function(e){B(e,q)}),[q,B]);var _=h.useState({}),H=_[0],P=_[1],Q=h.useCallback((function(){return P({})}),[]),W=h.useRef([]),Y=h.useMemo((function(){var e=W.current.length>0?Math.min.apply(Math,W.current):0;W.current=[];for(var t=F.current.measurements.slice(0,e),n=e;n<r;n++){var i=L(n),s=H[i],o=t[n-1]?t[n-1].end:u,c="number"==typeof s?s:a(n),l=o+c;t[n]={index:n,start:o,size:c,end:l,key:i}}return t}),[a,H,u,r,L]),G=((null==(t=Y[r-1])?void 0:t.end)||u)+f;F.current.measurements=Y,F.current.totalSize=G;var J=w?w.current:d.current,K=h.useRef(y);K.current=y,k((function(){if(J){var e=function(e){var t=K.current?K.current(e):J[A];j(t)};return e(),J.addEventListener("scroll",e,{capture:!1,passive:!0}),function(){J.removeEventListener("scroll",e)}}j(0)}),[J,A]);var U=function(e){for(var t=e.measurements,n=e.outerSize,r=e.scrollOffset,i=t.length-1,a=function(e,n,r,i){for(;e<=n;){var a=(e+n)/2|0,s=t[a].start;if(s<i)e=a+1;else{if(!(s>i))return a;n=a-1}}return e>0?e-1:0}(0,i,0,r),s=a;s<i&&t[s].end<r+n;)s++;return{start:a,end:s}}(F.current),X=U.start,$=U.end,ee=h.useMemo((function(){return D({start:X,end:$,overscan:o,size:Y.length})}),[X,$,o,Y.length,D]),te=h.useRef(T);te.current=T;var ne=h.useMemo((function(){for(var e=[],t=function(t,n){var r=ee[t],i=m(m({},Y[r]),{},{measureRef:function(e){if(e){var t=te.current(e,v);if(t!==i.size){var n=F.current.scrollOffset;i.start<n&&q(n+(t-i.size)),W.current.push(r),P((function(e){var n;return m(m({},e),{},((n={})[i.key]=t,n))}))}}}});e.push(i)},n=0,r=ee.length;n<r;n++)t(n);return e}),[ee,q,v,Y]),re=h.useRef(!1);k((function(){re.current&&P({}),re.current=!0}),[a]);var ie=h.useCallback((function(e,t){var n=(void 0===t?{}:t).align,r=void 0===n?"start":n,i=F.current,a=i.scrollOffset,s=i.outerSize;"auto"===r&&(r=e<=a?"start":e>=a+s?"end":"start"),"start"===r?p(e):"end"===r?p(e-s):"center"===r&&p(e-s/2)}),[p]),ae=h.useCallback((function(e,t){var n=void 0===t?{}:t,i=n.align,a=void 0===i?"auto":i,s=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(n,["align"]),o=F.current,c=o.measurements,u=o.scrollOffset,l=o.outerSize,f=c[Math.max(0,Math.min(e,r-1))];if(f){if("auto"===a)if(f.end>=u+l)a="end";else{if(!(f.start<=u))return;a="start"}var d="center"===a?f.start+f.size/2:"end"===a?f.end:f.start;ie(d,m({align:a},s))}}),[ie,r]),se=h.useCallback((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];ae.apply(void 0,t),requestAnimationFrame((function(){ae.apply(void 0,t)}))}),[ae]);return{virtualItems:ne,totalSize:G,scrollToOffset:ie,scrollToIndex:se,measure:Q}}({size:n.length,parentRef:v,estimateSize:L.useCallback((function(){return 30}),[])});return R.createElement("ul",(t={className:"wps-"+a,ref:v},(0,r.Z)(t,"className","List"),(0,r.Z)(t,"style",{height:"250px",width:"300px",overflow:"auto"}),t),R.createElement("div",{className:"ListInner",style:{height:"".concat(g.totalSize,"px"),width:"100%",position:"relative"}},g.virtualItems.map((function(e){return R.createElement(T,{key:e.index+e.end,data:d,index:e.index,size:e.size,start:e.start})}))))}},5076:function(e,t,n){var r=n(4140);e.exports=function(e,t){var n;return r(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}},9704:function(e,t,n){var r=n(2908),i=n(7206),a=n(5076),s=n(1469),o=n(6612);e.exports=function(e,t,n){var c=s(e)?r:a;return n&&o(e,t,n)&&(t=void 0),c(e,i(t,3))}}}]);
//# sourceMappingURL=3143.shopwp-components.js.map