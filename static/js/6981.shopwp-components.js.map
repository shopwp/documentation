{"version":3,"file":"6981.shopwp-components.js","mappings":"srBAsGA,UA9FA,WAC0CA,GAAGC,QAA3C,IAAQC,EAAR,EAAQA,SAAUC,EAAlB,EAAkBA,OAAQC,EAA1B,EAA0BA,UACpBC,GAAYC,EAAAA,EAAAA,KACZC,GAAeC,EAAAA,EAAAA,KACfC,GAAYC,EAAAA,EAAAA,KACZC,GAAeC,EAAAA,EAAAA,KACfC,EAAeV,IACrB,EAAkCD,EAASG,EAAUS,SAASC,MAA9D,eAAOC,EAAP,KAAkBC,EAAlB,KAEA,GAAyBC,EAAAA,EAAAA,GAAYF,EAAW,KAAzCG,GAAP,eACMC,GAAgBC,EAAAA,EAAAA,MAEtBjB,GAAU,WACJgB,GAIAf,EAAUS,SAASC,OAASI,IAIhCZ,EAAa,CAAEe,KAAM,uBAAwBC,SAAS,KAEtDC,EAAAA,EAAAA,IACEL,EACAd,EACAM,EACAE,EACAN,MAED,CAACY,IAEJf,GAAU,WACJC,EAAUS,SAASC,MACrBE,EAAaZ,EAAUS,SAASC,QAEjC,CAACV,EAAUS,SAASC,OASvB,IAAMU,EAAe,EAafC,EAAkB,EAmBxB,OACE,mBAASC,UAAU,iBAAiBC,IAAKH,IACvC,iBAAOI,QAAQ,mBAAmBpB,EAAUqB,SAASC,aACrD,oBACEH,IAAKF,EACLM,YAAavB,EAAUqB,SAASG,iBAChCC,GAAG,kBACHP,UAAU,+BACVQ,MAAOnB,EACPoB,SAhDN,SAAkBC,GACZhC,EAAUiC,gBAGdrB,EAAaoB,EAAEE,OAAOJ,QA6ClBK,IAAK3B,EACL4B,SAAUpC,EAAUiC","sources":["webpack://shopwpComponents/./src/components/cart/note/index.jsx"],"sourcesContent":["/** @jsx jsx */\nimport { jsx, css } from \"@emotion/react\"\nimport { useShopState, useShopDispatch } from \"../../shop/_state/hooks\"\nimport { useCartState, useCartDispatch } from \"../_state/hooks\"\nimport { useDebounce } from \"use-debounce\"\nimport { updateCartNote } from \"../api.jsx\"\nimport { useFirstRender } from \"Hooks\"\n\nfunction CartNote() {\n  const { useState, useRef, useEffect } = wp.element\n  const shopState = useShopState()\n  const shopDispatch = useShopDispatch()\n  const cartState = useCartState()\n  const cartDispatch = useCartDispatch()\n  const inputElement = useRef()\n  const [noteValue, setNoteValue] = useState(shopState.cartData.note)\n\n  const [debouncedValue] = useDebounce(noteValue, 450)\n  const isFirstRender = useFirstRender()\n\n  useEffect(() => {\n    if (isFirstRender) {\n      return\n    }\n\n    if (shopState.cartData.note === debouncedValue) {\n      return\n    }\n\n    shopDispatch({ type: \"SET_IS_CART_UPDATING\", payload: true })\n\n    updateCartNote(\n      debouncedValue,\n      shopState,\n      cartDispatch,\n      inputElement,\n      shopDispatch\n    )\n  }, [debouncedValue])\n\n  useEffect(() => {\n    if (shopState.cartData.note) {\n      setNoteValue(shopState.cartData.note)\n    }\n  }, [shopState.cartData.note])\n\n  function onChange(e) {\n    if (shopState.isCartUpdating) {\n      return\n    }\n    setNoteValue(e.target.value)\n  }\n\n  const CartNotesCSS = css`\n    margin-bottom: 0.5em;\n    padding: 0;\n    font-weight: none;\n    color: #121212;\n\n    label {\n      font-size: 15px;\n      display: block;\n      margin-bottom: 5px;\n    }\n  `\n\n  const CartTextareaCSS = css`\n    width: 100%;\n    color: #121212;\n    display: block;\n    font-size: 15px;\n    padding: 10px;\n    border-color: #7e7e7e;\n    appearance: none;\n    font-family: inherit;\n    border-radius: 5px;\n    min-height: 100px;\n    background: transparent;\n\n    ::placeholder,\n    ::-webkit-input-placeholder {\n      color: #969696;\n    }\n  `\n\n  return (\n    <section className=\"wps-cart-notes\" css={CartNotesCSS}>\n      <label htmlFor=\"wps-input-notes\">{cartState.settings.notesLabel}</label>\n      <textarea\n        css={CartTextareaCSS}\n        placeholder={cartState.settings.notesPlaceholder}\n        id=\"wps-input-notes\"\n        className=\"wps-input wps-input-textarea\"\n        value={noteValue}\n        onChange={onChange}\n        ref={inputElement}\n        disabled={shopState.isCartUpdating}\n      />\n    </section>\n  )\n}\n\nexport default CartNote\n"],"names":["wp","element","useState","useRef","useEffect","shopState","useShopState","shopDispatch","useShopDispatch","cartState","useCartState","cartDispatch","useCartDispatch","inputElement","cartData","note","noteValue","setNoteValue","useDebounce","debouncedValue","isFirstRender","useFirstRender","type","payload","updateCartNote","CartNotesCSS","CartTextareaCSS","className","css","htmlFor","settings","notesLabel","placeholder","notesPlaceholder","id","value","onChange","e","isCartUpdating","target","ref","disabled"],"sourceRoot":""}