{"version":3,"file":"TranslatorCountries-public.shopwp-components.js","mappings":"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","sources":["webpack://shopwpComponents/./src/common/translator/index.js","webpack://shopwpComponents/./src/components/translator/countries/index.jsx"],"sourcesContent":["function sanitizeLanguages(rawLanguages) {\n\treturn rawLanguages.map(language => {\n\t\treturn { label: language.endonymName, value: language }\n\t})\n}\n\nfunction sanitizeTranslations(rawTranslations) {\n\treturn rawTranslations.map(translation => {\n\t\ttranslation.flag =\n\t\t\tshopwp.misc.pluginsDirURL +\n\t\t\t'assets/flags/' +\n\t\t\ttranslation.isoCode.toLowerCase() +\n\t\t\t'.svg'\n\n\t\treturn { label: translation.name, value: translation }\n\t})\n}\n\nfunction findCountryByCode(countries) {\n\treturn countries.filter(\n\t\tcountry => country.value.isoCode === shopwp.general.countryCode\n\t)\n}\n\nfunction findLanguageByCode(languages, state) {\n\tif (!state.selectedLanguage) {\n\t\treturn false\n\t}\n\n\treturn languages.filter(\n\t\tlanguage => language.isoCode === state.selectedLanguage.value.isoCode\n\t)\n}\n\nexport {\n\tsanitizeLanguages,\n\tsanitizeTranslations,\n\tfindCountryByCode,\n\tfindLanguageByCode,\n}\n","/** @jsx jsx */\nimport { jsx, css } from \"@emotion/react\"\nimport Select from \"react-select\"\nimport { findLanguageByCode } from \"Common/translator\"\nimport { useShopDispatch } from \"../../shop/_state/hooks\"\nimport { useItemsDispatch } from \"../../items/_state/hooks\"\n\nfunction TranslatorCountries({ translatorState, translatorDispatch }) {\n  const shopDispatch = useShopDispatch()\n  const itemsDispatch = useItemsDispatch()\n\n  const TranslatorCSS = css`\n    width: 250px;\n    max-width: 100%;\n    margin: 0 5px;\n  `\n\n  function onChange(selectedCountry) {\n    if (selectedCountry) {\n      translatorDispatch({\n        type: \"SET_SELECTED_COUNTRY\",\n        payload: selectedCountry,\n      })\n\n      shopDispatch({\n        type: \"SET_COUNTRY\",\n        payload: selectedCountry.value.isoCode,\n      })\n\n      shopDispatch({\n        type: \"SET_CURRENCY\",\n        payload: selectedCountry.value.currency.isoCode,\n      })\n\n      const foundSelectedLanguage = findLanguageByCode(\n        selectedCountry.value.availableLanguages,\n        translatorState\n      )\n\n      if (!foundSelectedLanguage.length) {\n        translatorDispatch({\n          type: \"SET_SELECTED_LANGUAGE\",\n          payload: false,\n        })\n      }\n    }\n  }\n\n  const customStyles = {\n    option: (provided, state) => {\n      return {\n        ...provided,\n        paddingLeft: 60,\n        backgroundImage: \"url(\" + state.value.flag + \")\",\n        backgroundSize: \"35px 26px\",\n        backgroundRepeat: \"no-repeat\",\n        backgroundPosition: \"10px center\",\n      }\n    },\n    singleValue: (provided, state) => {\n      return {\n        ...provided,\n        paddingLeft: 33,\n        backgroundImage: \"url(\" + state.data.value.flag + \")\",\n        backgroundSize: \"25px 26px\",\n        backgroundRepeat: \"no-repeat\",\n        backgroundPosition: \"0px center\",\n      }\n    },\n  }\n\n  return (\n    <Select\n      styles={customStyles}\n      css={TranslatorCSS}\n      onChange={onChange}\n      options={translatorState.availableTranslations}\n      value={translatorState.selectedCountry}\n      placeholder={\n        translatorState.isLoading ? wp.i18n.__(\"Loading ... \", \"shopwp\") : false\n      }\n    />\n  )\n}\n\nexport default TranslatorCountries\n"],"names":["sanitizeLanguages","rawLanguages","map","language","label","endonymName","value","sanitizeTranslations","rawTranslations","translation","flag","shopwp","misc","pluginsDirURL","isoCode","toLowerCase","name","findCountryByCode","countries","filter","country","general","countryCode","findLanguageByCode","languages","state","selectedLanguage","jsx","css","Select","useShopDispatch","useItemsDispatch","TranslatorCountries","translatorState","translatorDispatch","shopDispatch","itemsDispatch","TranslatorCSS","onChange","selectedCountry","type","payload","currency","foundSelectedLanguage","availableLanguages","length","customStyles","option","provided","paddingLeft","backgroundImage","backgroundSize","backgroundRepeat","backgroundPosition","singleValue","data","availableTranslations","isLoading","wp","i18n","__"],"sourceRoot":""}