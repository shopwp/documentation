{"version":3,"file":"CartLineItem-public.shopwp-components.js","mappings":"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","sources":["webpack://shopwpComponents/./src/components/cart/lineitem/index.jsx"],"sourcesContent":["/** @jsx jsx */\nimport { jsx, css } from \"@emotion/react\"\n\nimport { containerFluidCSS, flexRowCSS, flexColSmallCSS, mq } from \"Common/css\"\n\nimport { FilterHook, shouldShowSaleNotice } from \"Utils\"\n\nimport { useCartState } from \"../../cart/_state/hooks\"\n\nconst Notice = wp.element.lazy(() =>\n  import(/* webpackChunkName: 'Notice-public' */ \"../../notice\")\n)\n\nconst CartLineItemPrice = wp.element.lazy(() =>\n  import(/* webpackChunkName: 'CartLineItemPrice-public' */ \"./price\")\n)\n\nconst CartAttributes = wp.element.lazy(() =>\n  import(/* webpackChunkName: 'CartAttributes-public' */ \"./attributes\")\n)\n\nconst CartLineItemVariantTitle = wp.element.lazy(() =>\n  import(\n    /* webpackChunkName: 'CartLineItemVariantTitle-public' */ \"./variant-title\"\n  )\n)\n\nconst CartLineItemQuantity = wp.element.lazy(() =>\n  import(/* webpackChunkName: 'CartLineItemQuantity-public' */ \"./quantity\")\n)\n\nconst CartLineItemTitle = wp.element.lazy(() =>\n  import(/* webpackChunkName: 'CartLineItemTitle-public' */ \"./title\")\n)\n\nconst CartLineItemRemove = wp.element.lazy(() =>\n  import(/* webpackChunkName: 'CartLineItemRemove-public' */ \"./remove\")\n)\n\nconst CartLineItemImage = wp.element.lazy(() =>\n  import(/* webpackChunkName: 'CartLineItemImage-public' */ \"./image\")\n)\n\nconst CartLineItemLeftInStock = wp.element.lazy(() =>\n  import(\n    /* webpackChunkName: 'CartLineItemLeftInStock-public' */ \"./left-in-stock\"\n  )\n)\n\nconst CartLineItemOutOfStock = wp.element.lazy(() =>\n  import(\n    /* webpackChunkName: 'CartLineItemOutOfStock-public' */ \"./out-of-stock\"\n  )\n)\n\nfunction CartLineItem({ lineItem }) {\n  const { useState, useRef } = wp.element\n  const cartState = useCartState()\n  const [isUpdating] = useState(() => false)\n  const [notice, setNotice] = useState(false)\n  const lineItemTotal = lineItem.estimatedCost.totalAmount.amount\n  const [subscriptionDiscount, setSubscriptionDiscount] = useState(false)\n\n  const lineItemElement = useRef()\n  const showingSaleNotice = shouldShowSaleNotice(lineItem)\n\n  const regPrice = calcPrice(\n    lineItem.quantity,\n    lineItem.merchandise.priceV2.amount\n  )\n\n  const salePrice = calcPrice(\n    lineItem.quantity,\n    lineItem.merchandise?.compareAtPriceV2\n      ? lineItem.merchandise.compareAtPriceV2.amount\n      : false\n  )\n\n  function calcPrice(lineItemQuantity, price) {\n    if (price === false) {\n      return false\n    }\n\n    return parseFloat(price) * parseFloat(lineItemQuantity)\n  }\n\n  function hasRealVariant() {\n    return lineItem.merchandise.title !== wp.i18n.__(\"Default Title\", \"shopwp\")\n  }\n\n  const lineItemStyles = css`\n    margin-top: 0;\n    min-height: 100px;\n    position: relative;\n    display: flex;\n    flex-direction: column;\n\n    .wps-cart-lineitem-img-link {\n      align-self: flex-start;\n      transition: opacity 0.2s ease;\n\n      &:hover {\n        opacity: 0.7;\n      }\n    }\n\n    [class*=\"noticeStyles\"] {\n      font-size: 13px;\n      margin-top: 10px;\n    }\n  `\n\n  const lineItemInner = css`\n    margin: 0;\n    display: flex;\n  `\n\n  const lineItemTitle = css`\n    color: #313131;\n    text-decoration: none;\n    font-size: 16px;\n    position: relative;\n    margin: 0;\n\n    &[data-wps-is-empty=\"true\"] {\n      margin-bottom: 1em;\n    }\n\n    &:hover {\n      color: #313131;\n    }\n  `\n\n  const cartLineItemContentCSS = css`\n    margin-top: 0;\n    flex: 1;\n    padding-left: 10px;\n    padding-bottom: 5px;\n\n    ${mq(\"small\")} {\n      padding-bottom: 15px;\n\n      .col-8 {\n        flex: 0 0 100%;\n        max-width: 100%;\n      }\n    }\n  `\n\n  const lineItemQuantityWrapperCSS = css`\n    position: relative;\n    flex-wrap: wrap;\n  `\n\n  return (\n    <div\n      className=\"wps-cart-lineitem\"\n      data-wps-is-updating={isUpdating}\n      data-wps-is-available={lineItem.merchandise.availableForSale}\n      ref={lineItemElement}\n      css={lineItemStyles}\n    >\n      <div css={lineItemInner}>\n        <CartLineItemImage lineItem={lineItem} settings={cartState.settings} />\n\n        <div className=\"wps-cart-lineitem-content\" css={cartLineItemContentCSS}>\n          <FilterHook name=\"before.lineItemTitle\" args={[cartState]} />\n\n          <div\n            css={lineItemTitle}\n            className=\"wps-cart-lineitem-title\"\n            data-wps-is-empty={hasRealVariant() ? \"false\" : \"true\"}\n          >\n            <div\n              className=\"wps-cart-lineitem-title-wrapper\"\n              css={containerFluidCSS}\n            >\n              <div css={flexRowCSS}>\n                <CartLineItemTitle\n                  lineItem={lineItem}\n                  settings={cartState.settings}\n                />\n                <CartLineItemRemove\n                  lineItem={lineItem}\n                  text={cartState.settings.lineitemRemoveText}\n                />\n              </div>\n            </div>\n          </div>\n\n          <FilterHook name=\"after.lineItemTitle\" args={[cartState]} />\n\n          {hasRealVariant() && <CartLineItemVariantTitle lineItem={lineItem} />}\n\n          {!lineItem.merchandise.availableForSale ? (\n            <CartLineItemOutOfStock\n              noticeUnavailableText={cartState.settings.noticeUnavailableText}\n            />\n          ) : (\n            <div\n              className=\"wps-cart-lineitem-quantity-wrapper\"\n              css={containerFluidCSS}\n            >\n              <div\n                css={[flexRowCSS, flexColSmallCSS, lineItemQuantityWrapperCSS]}\n              >\n                <CartLineItemQuantity\n                  lineItem={lineItem}\n                  setNotice={setNotice}\n                />\n                <CartLineItemPrice\n                  showingSaleNotice={showingSaleNotice}\n                  lineItemTotal={lineItemTotal}\n                  salePrice={salePrice}\n                  regPrice={regPrice}\n                  subscriptionDiscount={subscriptionDiscount}\n                  saleText={cartState.settings.lineitemSaleLabelText}\n                />\n\n                {shopwp.misc.isPro &&\n                cartState.settings.showInventoryLevels &&\n                lineItem.merchandise.quantityAvailable >= 1 &&\n                lineItem.merchandise.availableForSale &&\n                cartState.settings.leftInStockThreshold >=\n                  lineItem.merchandise.quantityAvailable ? (\n                  <CartLineItemLeftInStock lineItem={lineItem} />\n                ) : null}\n              </div>\n\n              {lineItem.attributes.length ? (\n                <CartAttributes lineItem={lineItem} />\n              ) : null}\n            </div>\n          )}\n        </div>\n      </div>\n      {notice ? <Notice status={notice.type}>{notice.message}</Notice> : null}\n    </div>\n  )\n}\n\nexport default CartLineItem\n"],"names":["jsx","css","containerFluidCSS","flexRowCSS","flexColSmallCSS","mq","FilterHook","shouldShowSaleNotice","useCartState","Notice","wp","element","lazy","CartLineItemPrice","CartAttributes","CartLineItemVariantTitle","CartLineItemQuantity","CartLineItemTitle","CartLineItemRemove","CartLineItemImage","CartLineItemLeftInStock","CartLineItemOutOfStock","CartLineItem","lineItem","useState","useRef","cartState","isUpdating","notice","setNotice","lineItemTotal","estimatedCost","totalAmount","amount","subscriptionDiscount","setSubscriptionDiscount","lineItemElement","showingSaleNotice","regPrice","calcPrice","quantity","merchandise","priceV2","salePrice","compareAtPriceV2","lineItemQuantity","price","parseFloat","hasRealVariant","title","i18n","__","lineItemStyles","lineItemInner","lineItemTitle","cartLineItemContentCSS","lineItemQuantityWrapperCSS","availableForSale","settings","lineitemRemoveText","noticeUnavailableText","lineitemSaleLabelText","shopwp","misc","isPro","showInventoryLevels","quantityAvailable","leftInStockThreshold","attributes","length","type","message"],"sourceRoot":""}