{"version":3,"file":"8356.shopwp-components.js","mappings":"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","sources":["webpack://shopwpComponents/./src/common/selections/index.jsx","webpack://shopwpComponents/./src/components/storefront/options/_state/reducer.js","webpack://shopwpComponents/./src/components/storefront/options/_state/context.js","webpack://shopwpComponents/./src/components/storefront/options/_state/provider.jsx","webpack://shopwpComponents/./src/components/storefront/options/_state/initial-state.js","webpack://shopwpComponents/./src/components/storefront/options/heading/index.jsx","webpack://shopwpComponents/./src/components/storefront/options/wrapper/index.jsx","webpack://shopwpComponents/./src/components/storefront/options/index.jsx","webpack://shopwpComponents/./node_modules/lodash/difference.js","webpack://shopwpComponents/./node_modules/lodash/union.js"],"sourcesContent":["import union from \"lodash/union\"\nimport without from \"lodash/without\"\nimport difference from \"lodash/difference\"\nimport isEmpty from \"lodash/isEmpty\"\nimport hasIn from \"lodash/hasIn\"\nimport isString from \"lodash/isString\"\nimport { objectIsEmpty } from \"Utils\"\n\nfunction lowercaseCurrentList(currentList) {\n  if (!currentList) {\n    return []\n  }\n\n  return currentList.map((name) => {\n    if (!isString(name)) {\n      return name\n    }\n\n    if (name.includes(\"gid://\")) {\n      return name\n    }\n\n    return String(name).toLowerCase()\n  })\n}\n\nfunction updateSelectionList(params) {\n  if (!params.isSelected) {\n    return without(\n      lowercaseCurrentList(params.currentList),\n      params.selectedValue\n    )\n  }\n\n  return union([params.selectedValue], params.currentList)\n}\n\nfunction isSelectionsOfTypeEmpty(selections, type) {\n  return !selections[type]\n}\n\nfunction findDeselectedValue(localSelectedState, globalSelectionsTypeList) {\n  return difference(localSelectedState, globalSelectionsTypeList)\n}\n\nfunction foundDeselectedValue(removedValue, localValue) {\n  return removedValue[0] === localValue\n}\n\nfunction getSelectionTypes(selections) {\n  var filterTypes = Object.keys(selections)\n\n  if (isEmpty(filterTypes) || objectIsEmpty(selections)) {\n    return []\n  }\n\n  return filterTypes\n}\n\n/*\n\nWhen selections are removed ...\n\n*/\nfunction isCurrentlySelected(selections, valueSelected, type) {\n  var selected = false\n\n  if (isEmpty(selections)) {\n    selected = false\n  } else {\n    if (!hasIn(selections, type)) {\n      selected = false\n    } else if (selections[type].find((value) => valueSelected === value)) {\n      selected = true\n    }\n  }\n\n  return selected\n}\n\nfunction createSelectionsOfType(itemType, typeSelections) {\n  const temp = {}\n\n  temp[itemType] = typeSelections\n\n  return temp\n}\n\nfunction buildNewSelection(\n  itemValue,\n  itemType,\n  isSelected,\n  existingSelections\n) {\n  for (const prop in existingSelections) {\n    if (prop !== itemType) {\n      if (isEmpty(existingSelections[prop])) {\n        delete existingSelections[prop]\n      }\n    }\n  }\n\n  if (itemType === \"collections\") {\n    for (const prop in existingSelections) {\n      if (prop !== \"collections\") {\n        delete existingSelections[prop]\n      }\n    }\n  } else {\n    for (const prop in existingSelections) {\n      if (prop === \"collections\") {\n        delete existingSelections[prop]\n      }\n    }\n  }\n\n  if (!itemValue) {\n    return updateSelectionList({\n      currentList: existingSelections[itemType],\n    })\n  }\n\n  if (isString(itemValue)) {\n    if (itemValue.includes(\"gid://\")) {\n      var newSelectedVal = itemValue\n    } else {\n      var newSelectedVal = String(itemValue).toLowerCase()\n    }\n  } else {\n    var newSelectedVal = itemValue\n  }\n\n  return updateSelectionList({\n    isSelected: isSelected,\n    currentList: existingSelections[itemType],\n    selectedValue: newSelectedVal,\n  })\n}\n\nexport {\n  updateSelectionList,\n  isSelectionsOfTypeEmpty,\n  findDeselectedValue,\n  foundDeselectedValue,\n  isCurrentlySelected,\n  getSelectionTypes,\n  createSelectionsOfType,\n  buildNewSelection,\n}\n","import { rSet } from \"Utils\"\n\nfunction StorefrontOptionsReducer(state, action) {\n  switch (action.type) {\n    case \"SET_IS_BOOTSTRAPPING\": {\n      return rSet(\"isBootstrapping\", action, state)\n    }\n\n    case \"SET_FILTER_OPTIONS\": {\n      return rSet(\"filterOptions\", action, state)\n    }\n\n    default: {\n      throw new Error(\n        `Unhandled action type: ${action.type} in StorefrontOptionsReducer`\n      )\n    }\n  }\n}\n\nexport default StorefrontOptionsReducer\n","const StorefrontOptionsContext = wp.element.createContext()\n\nexport default StorefrontOptionsContext\n","import StorefrontOptionsReducer from \"./reducer\"\nimport StorefrontOptionsInitialState from \"./initial-state\"\nimport StorefrontOptionsContext from \"./context\"\n\nfunction StorefrontOptionsProvider(props) {\n  const [state, dispatch] = wp.element.useReducer(\n    StorefrontOptionsReducer,\n    StorefrontOptionsInitialState(props.options)\n  )\n\n  const value = wp.element.useMemo(() => [state, dispatch], [state])\n\n  return <StorefrontOptionsContext.Provider value={value} {...props} />\n}\n\nexport default StorefrontOptionsProvider\n","function StorefrontOptionsInitialState() {\n\treturn {\n\t\tisBootstrapping: false,\n\t\tfilterOptions: [],\n\t}\n}\n\nexport default StorefrontOptionsInitialState\n","/** @jsx jsx */\nimport { jsx, css } from \"@emotion/react\"\nimport { usePortal } from \"Hooks\"\n\nfunction StorefrontFilterOptionsHeading({ dropzone, settings }) {\n  const headingCSS = css`\n    && {\n      font-size: 18px;\n      background-color: #eaeaea;\n      margin: 0;\n      padding: 10px 15px;\n      border-radius: 5px;\n    }\n  `\n  return usePortal(\n    <h2 className=\"wps-storefront-heading\" css={headingCSS}>\n      {settings.filterByLabelText}\n    </h2>,\n    document.querySelector(dropzone)\n  )\n}\n\nexport default StorefrontFilterOptionsHeading\n","/** @jsx jsx */\nimport { jsx, css } from \"@emotion/react\"\nimport StorefrontFilterOptionsHeading from \"../heading\"\nimport { usePortal } from \"Hooks\"\n\nconst OptionCollections = wp.element.lazy(() =>\n  import(\n    /* webpackChunkName: 'OptionCollections-public' */ \"../option-collections\"\n  )\n)\n\nconst OptionTags = wp.element.lazy(() =>\n  import(/* webpackChunkName: 'OptionTags-public' */ \"../option-tags\")\n)\n\nconst OptionTypes = wp.element.lazy(() =>\n  import(/* webpackChunkName: 'OptionTypes-public' */ \"../option-types\")\n)\n\nconst OptionVendors = wp.element.lazy(() =>\n  import(/* webpackChunkName: 'OptionVendors-public' */ \"../option-vendors\")\n)\n\nconst OptionPrice = wp.element.lazy(() =>\n  import(/* webpackChunkName: 'OptionPrice-public' */ \"../option-price\")\n)\n\nfunction StorefrontOptionsWrapper({ settings, dropzoneHeading }) {\n  const StorefrontSidebarCSS = css`\n    margin-bottom: 200px;\n\n    .wps-checkbox-wrapper {\n      align-items: center;\n      margin: 0;\n      padding: 0 0 0 18px;\n\n      &:hover {\n        cursor: pointer;\n\n        background-color: #f0f0f0;\n\n        label,\n        input {\n          cursor: pointer;\n        }\n      }\n    }\n\n    .wps-input-value {\n      opacity: 1;\n      margin: 0;\n      display: block;\n      position: static;\n      width: 16px;\n      height: 16px;\n      top: 0;\n\n      [disabled],\n      [disabled] + label {\n        opacity: 0.5;\n\n        &:hover {\n          cursor: not-allowed;\n        }\n      }\n    }\n\n    .wps-input-label {\n      display: flex;\n      flex: 1;\n      padding: 9px 0;\n\n      span {\n        flex: 1;\n        text-transform: capitalize;\n        margin-bottom: 0;\n        margin-left: 0;\n        padding: 0 0 0 10px;\n        line-height: 1;\n      }\n    }\n  `\n\n  return usePortal(\n    <>\n      {settings.showOptionsHeading && (\n        <StorefrontFilterOptionsHeading\n          settings={settings}\n          dropzone={dropzoneHeading}\n        />\n      )}\n      <aside className=\"wps-storefront-sidebar\" css={StorefrontSidebarCSS}>\n        {settings.showCollections && <OptionCollections settings={settings} />}\n\n        {settings.showPrice && <OptionPrice settings={settings} />}\n\n        {settings.showTags && <OptionTags settings={settings} />}\n\n        {settings.showVendors && <OptionVendors settings={settings} />}\n\n        {settings.showTypes && <OptionTypes settings={settings} />}\n      </aside>\n    </>,\n    document.querySelector(settings.dropzoneOptions)\n  )\n}\n\nexport default wp.element.memo(StorefrontOptionsWrapper)\n","import isEmpty from \"lodash/isEmpty\"\nimport { useStorefrontState, useStorefrontDispatch } from \"../_state/hooks\"\nimport StorefrontOptionsProvider from \"./_state/provider\"\nimport StorefrontOptionsWrapper from \"./wrapper\"\nimport { createSelectionsOfType, buildNewSelection } from \"Common/selections\"\n\nfunction StorefrontOptions({ settings }) {\n  const { useEffect } = wp.element\n  const storefrontState = useStorefrontState()\n  const storefrontDispatch = useStorefrontDispatch()\n\n  useEffect(() => {\n    if (isEmpty(storefrontState.lastSelected)) {\n      return\n    }\n\n    const newList = buildNewSelection(\n      storefrontState.lastSelected.itemValue,\n      storefrontState.lastSelected.itemType,\n      storefrontState.lastSelected.isSelected,\n      storefrontState.selections\n    )\n\n    storefrontDispatch({\n      type: \"SET_SELECTIONS\",\n      payload: createSelectionsOfType(\n        storefrontState.lastSelected.itemType,\n        newList\n      ),\n    })\n\n    storefrontDispatch({\n      type:\n        \"SET_SELECTED_\" +\n        String(storefrontState.lastSelected.itemType).toUpperCase(),\n      payload: newList,\n    })\n\n    if (newList.length) {\n      storefrontDispatch({\n        type: \"SET_HAS_SELECTIONS\",\n        payload: true,\n      })\n    } else {\n      storefrontDispatch({\n        type: \"SET_HAS_SELECTIONS\",\n        payload: false,\n      })\n    }\n  }, [storefrontState.lastSelected])\n\n  return (\n    <StorefrontOptionsProvider>\n      <StorefrontOptionsWrapper\n        settings={settings}\n        dropzoneHeading={settings.dropzoneHeading}\n      />\n    </StorefrontOptionsProvider>\n  )\n}\n\nexport default StorefrontOptions\n","var baseDifference = require('./_baseDifference'),\n    baseFlatten = require('./_baseFlatten'),\n    baseRest = require('./_baseRest'),\n    isArrayLikeObject = require('./isArrayLikeObject');\n\n/**\n * Creates an array of `array` values not included in the other given arrays\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons. The order and references of result values are\n * determined by the first array.\n *\n * **Note:** Unlike `_.pullAll`, this method returns a new array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {...Array} [values] The values to exclude.\n * @returns {Array} Returns the new array of filtered values.\n * @see _.without, _.xor\n * @example\n *\n * _.difference([2, 1], [2, 3]);\n * // => [1]\n */\nvar difference = baseRest(function(array, values) {\n  return isArrayLikeObject(array)\n    ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true))\n    : [];\n});\n\nmodule.exports = difference;\n","var baseFlatten = require('./_baseFlatten'),\n    baseRest = require('./_baseRest'),\n    baseUniq = require('./_baseUniq'),\n    isArrayLikeObject = require('./isArrayLikeObject');\n\n/**\n * Creates an array of unique values, in order, from all given arrays using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {...Array} [arrays] The arrays to inspect.\n * @returns {Array} Returns the new array of combined values.\n * @example\n *\n * _.union([2], [1, 2]);\n * // => [2, 1]\n */\nvar union = baseRest(function(arrays) {\n  return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true));\n});\n\nmodule.exports = union;\n"],"names":["updateSelectionList","params","isSelected","union","selectedValue","currentList","without","map","name","isString","includes","String","toLowerCase","getSelectionTypes","selections","filterTypes","Object","keys","isEmpty","objectIsEmpty","createSelectionsOfType","itemType","typeSelections","temp","buildNewSelection","itemValue","existingSelections","prop","newSelectedVal","state","action","type","rSet","Error","createContext","props","wp","useReducer","StorefrontOptionsReducer","options","isBootstrapping","filterOptions","dispatch","value","useMemo","dropzone","settings","headingCSS","usePortal","className","css","filterByLabelText","document","querySelector","OptionCollections","lazy","OptionTags","OptionTypes","OptionVendors","OptionPrice","memo","dropzoneHeading","StorefrontSidebarCSS","showOptionsHeading","showCollections","showPrice","showTags","showVendors","showTypes","dropzoneOptions","useEffect","storefrontState","useStorefrontState","storefrontDispatch","useStorefrontDispatch","lastSelected","newList","payload","toUpperCase","length","baseDifference","baseFlatten","baseRest","isArrayLikeObject","difference","array","values","module","exports","baseUniq","arrays"],"sourceRoot":""}