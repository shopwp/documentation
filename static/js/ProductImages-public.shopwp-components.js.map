{"version":3,"file":"ProductImages-public.shopwp-components.js","mappings":"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","sources":["webpack://shopwpComponents/./src/common/images/index.js","webpack://shopwpComponents/./src/components/products/product/images/featured/index.jsx","webpack://shopwpComponents/./src/components/products/product/images/gallery/_state/context.js","webpack://shopwpComponents/./src/components/products/product/images/gallery/_state/initial-state.js","webpack://shopwpComponents/./src/components/products/product/images/gallery/_state/provider.jsx","webpack://shopwpComponents/./src/components/products/product/images/gallery/_state/reducer.js","webpack://shopwpComponents/./src/components/products/product/images/gallery/index.jsx","webpack://shopwpComponents/./src/components/products/product/images/gallery/wrapper/index.jsx","webpack://shopwpComponents/./src/components/products/product/images/image/img.jsx","webpack://shopwpComponents/./src/components/products/product/images/image/index.jsx","webpack://shopwpComponents/./src/components/products/product/images/index.jsx","webpack://shopwpComponents/./src/components/products/product/images/thumbnail/index.jsx","webpack://shopwpComponents/./src/components/products/product/images/thumbnails/index.jsx","webpack://shopwpComponents/./src/components/products/product/images/thumbnails/mapped.jsx"],"sourcesContent":["function isInt(val) {\n\treturn Number.isInteger(val)\n}\n\nfunction isString(val) {\n\treturn typeof val === 'string' || val instanceof String\n}\n\nfunction explode(value, delimiter) {\n\treturn value.split(delimiter)\n}\n\nfunction getExtension(path) {\n\tif (!path) {\n\t\treturn\n\t}\n\n\tvar first = path.split('.')\n\n\tvar second = first[first.length - 1]\n\n\tvar third = second.split('?')[0]\n\n\treturn third\n}\n\n/*\n\nResponsible for splitting image into parts\n\n*/\nfunction splitFromExtension(imageUrl, extension) {\n\tvar delimiter = '.' + extension\n\n\treturn explode(imageUrl, delimiter)\n}\n\n/*\n\nResponsible for building width and height filter\n\n*/\nfunction buildWidthHeightFilter(width = 0, height = 0) {\n\tif (!isInt(width) || width < 0) {\n\t\twidth = 0\n\t}\n\n\tif (!isInt(height) || height < 0) {\n\t\theight = 0\n\t}\n\n\t// Both set\n\tif (width !== 0 && height !== 0) {\n\t\treturn '_' + width + 'x' + height\n\t}\n\n\t// Only width set\n\tif (height === 0 && width !== 0) {\n\t\treturn '_' + width + 'x'\n\t}\n\n\t// Only height set\n\tif (width === 0 && height !== 0) {\n\t\treturn '_x' + height\n\t}\n\n\treturn ''\n}\n\n/*\n\nResponsible for taking an $imageUrl and returning its parts.\n\n*/\nfunction splitImageUrl(imageUrl) {\n\tlet extension = getExtension(imageUrl)\n\n\tif (!extension) {\n\t\treturn false\n\t}\n\n\tlet imageParts = splitFromExtension(imageUrl, extension)\n\n\treturn {\n\t\textension: extension,\n\t\tbeforeExtension: imageParts[0],\n\t\tafterExtension: imageParts[1],\n\t}\n}\n\n/*\n\nResponsible for taking a $crop value and returning the URL string version.\n\nEmpty string is no $crop set\n\n*/\nfunction buildCropFilter(crop = '') {\n\tif (!crop || !isString(crop) || crop === 'none') {\n\t\treturn ''\n\t}\n\n\treturn '_crop_' + crop\n}\n\n/*\n\nResponsible for taking a $scale value and returning the URL string version.\n\nEmpty string is no $scale set\n\n*/\nfunction buildScaleFilter(scale = 0) {\n\tif (!scale || !isInt(scale) || scale <= 1 || scale > 3) {\n\t\treturn ''\n\t}\n\n\treturn '@' + scale + 'x'\n}\n\n/*\n\nResponsible for adding width and height filter to image URL\n\n*/\nfunction addCustomSizeToImageUrl(width, height, imageUrl) {\n\tlet splitParts = splitImageUrl(imageUrl)\n\n\tif (splitParts === false) {\n\t\treturn imageUrl\n\t}\n\n\treturn (\n\t\tsplitParts.beforeExtension +\n\t\tbuildWidthHeightFilter(width, height) +\n\t\t'.' +\n\t\tsplitParts.extension +\n\t\tsplitParts.afterExtension\n\t)\n}\n\nfunction autoWidthAndHeight(settings) {\n\tif (settings.width) {\n\t\treturn settings.width === 0 && settings.height === 0\n\t}\n\n\treturn true\n}\n\n/*\n\nResponsible for adding crop filter to image URL\n\n*/\nfunction addCustomCropToImageUrl(settings, imageUrl) {\n\tlet splitParts = splitImageUrl(imageUrl)\n\n\tif (splitParts === false || !settings.crop || autoWidthAndHeight(settings)) {\n\t\treturn imageUrl\n\t}\n\n\treturn (\n\t\tsplitParts.beforeExtension +\n\t\tbuildCropFilter(settings.crop) +\n\t\t'.' +\n\t\tsplitParts.extension +\n\t\tsplitParts.afterExtension\n\t)\n}\n\n/*\n\nResponsible for adding scale filter to image URL\n\n*/\nfunction addCustomScaleToImageUrl(settings, imageUrl) {\n\tlet splitParts = splitImageUrl(imageUrl)\n\n\tif (splitParts === false || settings.scale <= 1 || settings.scale > 3) {\n\t\treturn imageUrl\n\t}\n\n\treturn (\n\t\tsplitParts.beforeExtension +\n\t\tbuildScaleFilter(settings.scale) +\n\t\t'.' +\n\t\tsplitParts.extension +\n\t\tsplitParts.afterExtension\n\t)\n}\n\nfunction isPlaceholder(src) {\n\tif (!src) {\n\t\treturn false\n\t}\n\n\treturn src.includes('cdn.shopify.com/s/files/1/0533/2089/files/placeholder')\n}\n\n/*\n\n$settings is an array with this structure:\n\n[\n   'src'\t\t\t=> 'https://domain.com/s/files/1/1405/0664.jpg',\n   'width'\t\t=> 300\n   'height'\t=> 0\n   'crop'\t\t=> 'none'\n   'scale'\t\t=> 0\n]\n\n*/\nfunction addCustomSizingToImageUrl(settings) {\n\tif (settings.src && isPlaceholder(settings.src)) {\n\t\treturn settings.src\n\t}\n\n\t// Returns a modified image URL\n\treturn addCustomScaleToImageUrl(\n\t\tsettings,\n\t\taddCustomCropToImageUrl(\n\t\t\tsettings,\n\t\t\taddCustomSizeToImageUrl(settings.width, settings.height, settings.src)\n\t\t)\n\t)\n}\n\nfunction doFeaturedSizing(src, settings) {\n\tif (!settings) {\n\t\treturn src\n\t}\n\n\treturn addCustomSizingToImageUrl({\n\t\tsrc: src,\n\t\twidth: settings.imagesSizingWidth,\n\t\theight: settings.imagesSizingHeight,\n\t\tcrop: settings.imagesSizingCrop,\n\t\tscale: settings.imagesSizingScale,\n\t})\n}\n\nfunction doThumbnailSizing(src, settings) {\n\tif (!settings) {\n\t\treturn src\n\t}\n\treturn addCustomSizingToImageUrl({\n\t\tsrc: src,\n\t\twidth: settings.thumbnailImagesSizingWidth,\n\t\theight: settings.thumbnailImagesSizingHeight,\n\t\tcrop: settings.thumbnailImagesSizingCrop,\n\t\tscale: settings.thumbnailImagesSizingScale,\n\t})\n}\n\nfunction getMediaInfo(image) {\n\tvar media = {\n\t\tid: '',\n\t\tdata: false,\n\t}\n\n\tswitch (image.node.mediaContentType) {\n\t\tcase 'IMAGE':\n\t\t\tmedia.id = image.node.image.id\n\t\t\tmedia.data = image.node.image\n\n\t\t\tbreak\n\t\tcase 'VIDEO':\n\t\t\tmedia.id = image.node.previewImage.id\n\t\t\tmedia.data = image.node\n\n\t\t\tbreak\n\n\t\tcase 'EXTERNAL_VIDEO':\n\t\t\tmedia.id = image.node.id\n\t\t\tmedia.data = image.node\n\n\t\t\tbreak\n\n\t\tdefault:\n\t\t\tbreak\n\t}\n\n\treturn media\n}\n\nexport {\n\tsplitFromExtension,\n\tbuildWidthHeightFilter,\n\tsplitImageUrl,\n\tbuildCropFilter,\n\tbuildScaleFilter,\n\taddCustomSizeToImageUrl,\n\tautoWidthAndHeight,\n\taddCustomCropToImageUrl,\n\taddCustomScaleToImageUrl,\n\taddCustomSizingToImageUrl,\n\tdoFeaturedSizing,\n\tdoThumbnailSizing,\n\tgetMediaInfo,\n}\n","/** @jsx jsx */\nimport { jsx, css } from \"@emotion/react\"\nimport ProductGalleryContext from \"../gallery/_state/context\"\nimport ProductImage from \"../image\"\nimport isNull from \"lodash/isNull\"\nimport Drift from \"drift-zoom\"\nimport { useFirstRender } from \"Hooks\"\n\nconst ProductImageSoldOutLabel = wp.element.lazy(() =>\n  import(\n    /* webpackChunkName: 'ProductImageSoldOutLabel-public' */ \"../sold-out-label\"\n  )\n)\n\nconst ProductImageOnSaleLabel = wp.element.lazy(() =>\n  import(\n    /* webpackChunkName: 'ProductImageOnSaleLabel-public' */ \"../on-sale-label\"\n  )\n)\n\nconst ProductFeaturedImageVideo = wp.element.lazy(() =>\n  import(/* webpackChunkName: 'ProductFeaturedImageVideo-public' */ \"../video\")\n)\n\nfunction destroyDrift(drift) {\n  drift.destroy()\n  window.Drift = null\n  drift = null\n}\n\nfunction ProductFeaturedImage({ settings, payload, isOnSale }) {\n  const { useEffect, useContext, useRef, useState, Suspense } = wp.element\n  const paneElement = useRef()\n  const isFirstRender = useFirstRender()\n  const [galleryState, galleryDispatch] = useContext(ProductGalleryContext)\n  const [originalFeatImg] = useState(galleryState.featImage)\n\n  function driftOptions() {\n    return {\n      ...settings.imageZoomOptions,\n      inlineContainer: paneElement.current,\n      paneContainer: paneElement.current,\n    }\n  }\n\n  function showZoom() {\n    if (settings.linkTo !== \"none\") {\n      return false\n    }\n\n    if (isNull(settings.showZoom)) {\n      return shopwp.general.productsImagesShowZoom\n    }\n\n    return settings.showZoom\n  }\n\n  function hasFeatImage() {\n    return (\n      galleryState.featImage &&\n      galleryState.featImageElement &&\n      paneElement.current\n    )\n  }\n\n  function findNextImageIndex() {\n    var foundIndex = 0\n    payload.media.edges.forEach((image, index) => {\n      if (image.node.mediaContentType === \"IMAGE\") {\n        if (image.node.image.id === originalFeatImg.id) {\n          foundIndex = index + 1\n        }\n      }\n    })\n\n    return foundIndex\n  }\n\n  function onMouseEnter() {\n    var foundIndex = findNextImageIndex()\n\n    if (foundIndex === 0) {\n      return\n    }\n\n    var foundNextImage = payload.media.edges[foundIndex].node\n\n    if (foundNextImage) {\n      galleryDispatch({\n        type: \"SET_FEAT_IMAGE\",\n        payload: foundNextImage.image,\n      })\n    }\n  }\n\n  function onMouseLeave() {\n    galleryDispatch({\n      type: \"SET_FEAT_IMAGE\",\n      payload: originalFeatImg,\n    })\n  }\n\n  const paneElementCSS = css`\n    position: relative;\n  `\n\n  const ProductImageFeaturedWrapperCSS = css`\n    display: flex;\n    align-items: flex-start;\n    justify-content: ${settings.imagesAlign === \"left\"\n      ? \"flex-start\"\n      : settings.imagesAlign === \"right\"\n      ? \"flex-end\"\n      : settings.imagesAlign};\n  `\n\n  const isOutOfStock = payload.availableForSale === false\n\n  function isShowingNextOnHover() {\n    if (galleryState.featImageIsVideo) {\n      return false\n    }\n\n    if (showZoom()) {\n      return false\n    }\n\n    if (payload.media.edges.length <= 1) {\n      return false\n    }\n\n    return settings.imagesShowNextOnHover\n  }\n\n  useEffect(() => {\n    if (!shopwp.misc.isPro) {\n      return\n    }\n\n    if (isFirstRender) {\n      return\n    }\n\n    if (hasFeatImage() && showZoom()) {\n      var drift = new Drift(galleryState.featImageElement, driftOptions())\n\n      return () => {\n        destroyDrift(drift)\n      }\n    }\n  }, [galleryState.featImageElement, settings.showZoom])\n\n  return (\n    <div\n      className=\"wps-gallery-featured-wrapper\"\n      ref={paneElement}\n      css={paneElementCSS}\n      onMouseEnter={isShowingNextOnHover() ? onMouseEnter : undefined}\n      onMouseLeave={isShowingNextOnHover() ? onMouseLeave : undefined}\n    >\n      {galleryState.featImageIsVideo ? (\n        <ProductFeaturedImageVideo videoData={galleryState.featImage} />\n      ) : (\n        <>\n          {isOnSale && settings.showSaleNotice && !isOutOfStock && (\n            <Suspense fallback={false}>\n              <ProductImageOnSaleLabel text={settings.saleLabelText} />\n            </Suspense>\n          )}\n\n          {isOutOfStock &&\n            galleryState.featImage &&\n            settings.showOutOfStockNotice && (\n              <Suspense fallback={false}>\n                <ProductImageSoldOutLabel\n                  text={settings.soldOutImageLabelText}\n                />\n              </Suspense>\n            )}\n          <div\n            className=\"wps-product-image-wrapper\"\n            css={ProductImageFeaturedWrapperCSS}\n          >\n            {galleryState.featImage ? (\n              <ProductImage\n                payload={payload}\n                settings={settings}\n                isFeatured={true}\n                image={galleryState.featImage}\n              />\n            ) : (\n              <ProductImage\n                payload={payload}\n                settings={settings}\n                isFeatured={true}\n                image={galleryState.featImagePlaceholder}\n                placeholder={true}\n              />\n            )}\n          </div>\n        </>\n      )}\n    </div>\n  )\n}\n\nexport { ProductFeaturedImage }\n","const ProductGalleryContext = wp.element.createContext()\n\nexport default ProductGalleryContext\n","function ProductGalleryInitialState(props) {\n  if (props.payload.media.edges.length) {\n    if (props.payload.media.edges[0]?.node.mediaContentType === \"IMAGE\") {\n      var featImage = props.payload.media.edges[0].node.image\n      var featImageIsVideo = false\n    } else {\n      var featImage = props.payload.media.edges[0].node\n      var featImageIsVideo = true\n    }\n  } else {\n    var featImage = false\n  }\n\n  return {\n    product: props.payload,\n    featImageIsVideo: featImageIsVideo,\n    featImage: props.payload ? featImage : false,\n    featImageElement: false,\n    featImagePlaceholder: {\n      src: props.settings.imagePlaceholder,\n      alt: wp.i18n.__(\"Placeholder Image\", \"shopwp\"),\n    },\n  }\n}\n\nexport default ProductGalleryInitialState\n","import ProductGalleryReducer from \"./reducer\"\nimport ProductGalleryInitialState from \"./initial-state\"\nimport ProductGalleryContext from \"./context\"\n\nfunction ProductGalleryProvider(props) {\n  const [state, dispatch] = wp.element.useReducer(\n    ProductGalleryReducer,\n    ProductGalleryInitialState(props)\n  )\n\n  const value = wp.element.useMemo(() => [state, dispatch], [state])\n\n  return <ProductGalleryContext.Provider value={value} {...props} />\n}\n\nexport { ProductGalleryProvider }\n","import { rSet } from \"Utils\"\n\nfunction ProductGalleryReducer(state, action) {\n  switch (action.type) {\n    case \"SET_FEAT_IMAGE\": {\n      return rSet(\"featImage\", action, state)\n    }\n\n    case \"SET_FEAT_IMAGE_ELEMENT\": {\n      return rSet(\"featImageElement\", action, state)\n    }\n\n    case \"SET_FEAT_IMAGE_IS_VIDEO\": {\n      return rSet(\"featImageIsVideo\", action, state)\n    }\n\n    default: {\n      throw new Error(\n        `Unhandled action type: ${action.type} in ProductGalleryReducer`\n      )\n    }\n  }\n}\n\nexport default ProductGalleryReducer\n","import { useProductState } from \"../../_state/hooks\"\nimport ProductGalleryContext from \"./_state/context\"\nimport ProductThumbnailImages from \"../thumbnails\"\nimport { ProductFeaturedImage } from \"../featured\"\nimport { hasLink } from \"Common/settings\"\n\nfunction ProductGallery({ settings, payload, carousel }) {\n  const { useEffect, useContext } = wp.element\n  const productState = useProductState()\n  const [, galleryDispatch] = useContext(ProductGalleryContext)\n\n  function hasManyImages() {\n    if (!productState) {\n      return false\n    }\n\n    return productState.hasManyImages\n  }\n\n  function isFeaturedOnly() {\n    if (hasLink(settings)) {\n      if (settings.showFeaturedOnly || settings.linkTo !== \"none\") {\n        return true\n      } else {\n        return false\n      }\n    }\n\n    return settings.showFeaturedOnly\n  }\n\n  useEffect(() => {\n    if (!productState.selectedVariant) {\n      return\n    }\n\n    galleryDispatch({\n      type: \"SET_FEAT_IMAGE_IS_VIDEO\",\n      payload: false,\n    })\n\n    galleryDispatch({\n      type: \"SET_FEAT_IMAGE\",\n      payload: productState.selectedVariant.node.image,\n    })\n  }, [productState.selectedVariant])\n\n  return (\n    <>\n      {isFeaturedOnly() ? (\n        <ProductFeaturedImage\n          isOnSale={productState.isOnSale}\n          payload={payload}\n          settings={settings}\n        />\n      ) : hasManyImages() ? (\n        settings.showImagesCarousel ? (\n          carousel && carousel\n        ) : (\n          <>\n            <ProductFeaturedImage\n              payload={payload}\n              settings={settings}\n              isOnSale={productState.isOnSale}\n            />\n            <ProductThumbnailImages product={payload} settings={settings} />\n          </>\n        )\n      ) : (\n        <ProductFeaturedImage\n          payload={payload}\n          settings={settings}\n          isOnSale={productState.isOnSale}\n        />\n      )}\n    </>\n  )\n}\n\nexport { ProductGallery }\n","/** @jsx jsx */\nimport { jsx, css } from \"@emotion/react\"\nimport { ProductGallery } from \"../index\"\nimport { ProductGalleryProvider } from \"../_state/provider.jsx\"\n\nconst ProductCarouselImages = wp.element.lazy(() =>\n  import(\n    /* webpackChunkName: 'ProductCarouselImages-public' */ \"../../carousel\"\n  )\n)\n\nfunction ProductGalleryWrapper({\n  settings,\n  payload,\n  defaultGalleryCarouselSettings,\n  element,\n}) {\n  const ProductGalleryWrapperCSS = css`\n    margin-bottom: ${settings.isSingleComponent ? \"0px\" : \"15px\"};\n  `\n\n  return (\n    <div\n      className=\"wps-component wps-component-products-images\"\n      aria-label=\"Product Images\"\n      css={ProductGalleryWrapperCSS}\n    >\n      <ProductGalleryProvider payload={payload} settings={settings}>\n        <ProductGallery\n          payload={payload}\n          settings={settings}\n          carousel={\n            <ProductCarouselImages\n              images={payload.media.edges}\n              defaultCarouselSettings={defaultGalleryCarouselSettings}\n              element={element}\n            />\n          }\n        />\n      </ProductGalleryProvider>\n    </div>\n  )\n}\n\nexport default ProductGalleryWrapper\n","/** @jsx jsx */\nimport { jsx, css } from \"@emotion/react\"\n\nfunction Img(props) {\n  function isSelectedImage() {\n    if (props.isFeatured) {\n      return\n    }\n\n    if (\n      props.galleryState.featImage?.mediaContentType &&\n      props.image?.previewImage\n    ) {\n      if (props.galleryState.featImage?.sources && props.image?.sources) {\n        return (\n          props.galleryState.featImage.previewImage.id ===\n          props.image.previewImage.id\n        )\n      } else {\n        return (\n          props.galleryState.featImage.embeddedUrl === props.image.embeddedUrl\n        )\n      }\n    } else {\n      return (\n        props.galleryState.featImage.originalSrc === props.image.originalSrc\n      )\n    }\n  }\n\n  const featThumbStyles = css`\n    outline: 1px dashed #000000;\n    outline-offset: 3px;\n    transition: transform 100ms ease;\n    max-width: 100%;\n  `\n\n  const thumbnailStyles = css`\n    display: block;\n    margin-bottom: ${props.isFeatured ? \"0px\" : \"10px\"};\n    max-width: 100%;\n    filter: ${props.isVideo ? \"brightness(0.5)\" : \"none\"};\n    &:focus,\n    &:active {\n      outline: ${props.isFeatured ? \"none\" : \"1px dashed #000000\"};\n      outline-offset: ${props.isFeatured ? \"none\" : \"3px\"};\n    }\n\n    &:hover {\n      cursor: ${props.isFeatured\n        ? \"default\" && props.linkTo !== \"modal\"\n        : \"pointer\"};\n    }\n  `\n\n  const videoIcon = css`\n    position: absolute;\n    width: 12px;\n    fill: white;\n    top: calc(50% - 14px);\n    z-index: 9999;\n    left: calc(50% - 6px);\n  `\n\n  return (\n    <>\n      <img\n        css={isSelectedImage() ? featThumbStyles : thumbnailStyles}\n        ref={props.imageRef}\n        itemProp=\"image\"\n        src={props.productImageSrc}\n        className=\"wps-product-image\"\n        loading=\"lazy\"\n        alt={\n          props.image.altText\n            ? props.image.altText\n            : wp.i18n.__(\"Thumbnail for \", \"shopwp\") +\n              props.galleryState.product.title\n        }\n        data-zoom={props.image.originalSrc}\n      />\n      {props.isVideo && (\n        <svg\n          css={videoIcon}\n          xmlns=\"http://www.w3.org/2000/svg\"\n          viewBox=\"0 0 384 512\"\n        >\n          <path d=\"M24.52 38.13C39.66 29.64 58.21 29.99 73.03 39.04L361 215C375.3 223.8 384 239.3 384 256C384 272.7 375.3 288.2 361 296.1L73.03 472.1C58.21 482 39.66 482.4 24.52 473.9C9.377 465.4 0 449.4 0 432V80C0 62.64 9.377 46.63 24.52 38.13V38.13zM48 432L336 256L48 80V432z\" />\n        </svg>\n      )}\n    </>\n  )\n}\n\nexport default wp.element.memo(Img)\n","import ProductGalleryContext from \"../gallery/_state/context\"\nimport { doFeaturedSizing, doThumbnailSizing } from \"Common/images\"\nimport Img from \"./img\"\n\nimport { hasLink } from \"Common/settings\"\n\nconst Link = wp.element.lazy(() =>\n  import(/* webpackChunkName: 'Link-public' */ \"../../../../link\")\n)\n\nfunction ProductImage({\n  image,\n  isFeatured,\n  settings,\n  payload,\n  placeholder = false,\n  isVideo = false,\n}) {\n  const { useEffect, useContext, useRef, useState } = wp.element\n  const imageRef = useRef()\n  const [galleryState, galleryDispatch] = useContext(ProductGalleryContext)\n  const [productImageSrc, setProductImageSrc] = useState(() =>\n    wp.hooks.applyFilters(\n      \"product.imageSrc\",\n      applyImageSizing(),\n      image,\n      isFeatured,\n      isVideo,\n      payload\n    )\n  )\n\n  function applyImageSizing() {\n    if (isVideo) {\n      if (isFeatured) {\n        if (image.mediaContentType === \"EXTERNAL_VIDEO\") {\n          return image.embeddedUrl\n        } else {\n          return image.sources[0].url\n        }\n      }\n\n      return doThumbnailSizing(image.previewImage.url, settings)\n    }\n\n    if (placeholder) {\n      return image.src\n    }\n\n    if (isFeatured) {\n      if (settings.imagesSizingToggle) {\n        return doFeaturedSizing(image.originalSrc, settings)\n      }\n\n      return image.originalSrc\n    } else {\n      if (settings.thumbnailImagesSizingToggle) {\n        return doThumbnailSizing(image.originalSrc, settings)\n      }\n      return image.originalSrc\n    }\n  }\n\n  useEffect(() => {\n    setProductImageSrc(applyImageSizing())\n\n    if (isFeatured) {\n      galleryDispatch({\n        type: \"SET_FEAT_IMAGE_ELEMENT\",\n        payload: imageRef.current,\n      })\n    }\n  }, [image, settings])\n\n  /*\n   \n   TODO: Fix duplication here. For some reason the Drift image zoom breaks if we move \n   the image tag into a reusable component. Probably something to do with ref forwarding.\n\n   */\n  return productImageSrc ? (\n    hasLink(settings) ? (\n      <Link\n        payload={payload}\n        type=\"products\"\n        linkTo={settings.linkTo}\n        target={settings.linkTarget}\n      >\n        <Img\n          imageRef={imageRef}\n          image={image}\n          productImageSrc={productImageSrc}\n          galleryState={galleryState}\n          isFeatured={isFeatured}\n          linkTo={settings.linkTo}\n          isVideo={isVideo}\n        />\n      </Link>\n    ) : (\n      <Img\n        imageRef={imageRef}\n        image={image}\n        productImageSrc={productImageSrc}\n        galleryState={galleryState}\n        isFeatured={isFeatured}\n        linkTo={settings.linkTo}\n        isVideo={isVideo}\n      />\n    )\n  ) : null\n}\n\nexport default wp.element.memo(ProductImage)\n","import ProductGalleryWrapper from \"./gallery/wrapper\"\nimport { usePortal } from \"Hooks\"\nimport { findPortalElement } from \"Utils\"\nimport { useProductState } from \"../_state/hooks\"\nimport { useItemsState } from \"../../../items/_state/hooks\"\n\nfunction ProductImages() {\n  const productState = useProductState()\n  const itemsState = useItemsState()\n\n  return usePortal(\n    <ProductGalleryWrapper\n      defaultGalleryCarouselSettings={\n        productState.defaultGalleryCarouselSettings\n      }\n      settings={itemsState.settings}\n      payload={productState.payload}\n      element={productState.element}\n    />,\n    findPortalElement(itemsState.settings.dropzoneProductGallery)\n  )\n}\n\nexport default ProductImages\n","/** @jsx jsx */\nimport { jsx, css } from \"@emotion/react\"\nimport ProductImage from \"../image\"\nimport ProductGalleryContext from \"../gallery/_state/context\"\nimport { FilterHook } from \"Utils\"\n\nfunction ProductThumbnailImage({\n  image,\n  payload,\n  settings,\n  isExternalVideo,\n  isHostedVideo,\n}) {\n  const { useEffect, useContext, useState } = wp.element\n  const [galleryState, galleryDispatch] = useContext(ProductGalleryContext)\n  const [isActive, setIsActive] = useState(() => false)\n\n  const ThumbnailCSS = css`\n    transition: outline 0.2s ease;\n    position: relative;\n\n    &:hover {\n      img {\n        outline: 1px dashed #000000;\n        outline-offset: 3px;\n      }\n    }\n  `\n\n  useEffect(() => {\n    if (!checkIsActive(galleryState.featImage.originalSrc)) {\n      setIsActive(false)\n    } else {\n      setIsActive(true)\n    }\n\n    return function cleanup() {\n      setIsActive(false)\n    }\n  }, [galleryState.featImage])\n\n  function checkIsActive(featImageSrc) {\n    return featImageSrc === image.originalSrc\n  }\n\n  function onClick() {\n    galleryDispatch({ type: \"SET_FEAT_IMAGE\", payload: image })\n    galleryDispatch({\n      type: \"SET_FEAT_IMAGE_IS_VIDEO\",\n      payload: isExternalVideo || isHostedVideo,\n    })\n  }\n\n  return (\n    <div\n      css={ThumbnailCSS}\n      className=\"wps-component wps-component-products-images-thumbnail\"\n      aria-label=\"Product Images Thumbnail\"\n      onClick={onClick}\n      data-wps-is-active={isActive}\n    >\n      <FilterHook name=\"before.productThumbnail\" args={[galleryState]} />\n      {isExternalVideo || isHostedVideo ? (\n        <ProductImage\n          settings={settings}\n          isFeatured={false}\n          image={image}\n          payload={payload}\n          isVideo={true}\n        />\n      ) : (\n        <ProductImage\n          settings={settings}\n          isFeatured={false}\n          image={image}\n          payload={payload}\n        />\n      )}\n\n      <FilterHook name=\"after.productThumbnail\" args={[galleryState]} />\n    </div>\n  )\n}\n\nexport default wp.element.memo(ProductThumbnailImage)\n","/** @jsx jsx */\nimport { jsx, css } from \"@emotion/react\"\nimport Thumbnails from \"./mapped\"\nimport { doFeaturedSizing } from \"Common/images\"\nimport { mq } from \"Common/css\"\nimport isEmpty from \"lodash/isEmpty\"\nimport to from \"await-to-js\"\n\nfunction ProductThumbnailImages({ product, settings }) {\n  const { useState } = wp.element\n  const [preloadStatus, setPreloadStatus] = useState(\"idle\")\n\n  const [thumbnails] = useState(\n    wp.hooks.applyFilters(\"product.thumbnails\", product.media)\n  )\n\n  const thumbnailsWrapperCSS = css`\n    display: grid;\n    grid-template-columns: repeat(5, 1fr);\n    grid-template-rows: 1fr;\n    grid-column-gap: 15px;\n    grid-row-gap: 0px;\n    margin-top: 12px;\n    max-width: 410px;\n\n    ${mq(\"large\")} {\n      display: flex;\n      flex-wrap: wrap;\n      gap: 0px 12px;\n      max-width: 100%;\n\n      > div {\n        width: 57px;\n      }\n    }\n  `\n\n  function hasImages() {\n    if (settings.linkTo === \"modal\") {\n      return false\n    }\n\n    return product && !isEmpty(product.media)\n  }\n\n  function preload(imageObj) {\n    return new Promise((resolve, reject) => {\n      const img = new Image()\n\n      if (imageObj.node && imageObj.node.mediaContentType === \"IMAGE\") {\n        img.onload = resolve\n        img.onerror = reject\n        img.src = doFeaturedSizing(imageObj.node.image.originalSrc, settings)\n      }\n    })\n  }\n\n  function preloadAll(images) {\n    return Promise.all(images.edges.map(preload))\n  }\n\n  async function preloadImages() {\n    await to(preloadAll(product.media))\n\n    setPreloadStatus(\"done\")\n  }\n\n  function onMouseEnter() {\n    if (preloadStatus === \"done\") {\n      return\n    }\n\n    preloadImages()\n  }\n\n  return hasImages() ? (\n    <div\n      className=\"wps-thumbnails-wrapper\"\n      aria-label=\"Product Thumbnails\"\n      css={thumbnailsWrapperCSS}\n      onMouseEnter={preloadStatus === \"idle\" ? onMouseEnter : undefined}\n    >\n      <Thumbnails\n        payload={product}\n        thumbnails={thumbnails}\n        settings={settings}\n      />\n    </div>\n  ) : null\n}\n\nexport default wp.element.memo(ProductThumbnailImages)\n","import ProductThumbnailImage from \"../thumbnail\"\nimport { getMediaInfo } from \"Common/images\"\n\nfunction Thumbnails({ payload, thumbnails, settings }) {\n  function getMediaId(image) {\n    const media = getMediaInfo(image)\n    return media.id\n  }\n\n  function getMediaData(image) {\n    const media = getMediaInfo(image)\n    return media.data\n  }\n\n  return thumbnails.edges.map((image) => (\n    <ProductThumbnailImage\n      key={getMediaId(image)}\n      image={getMediaData(image)}\n      payload={payload}\n      settings={settings}\n      isExternalVideo={\n        image.node.mediaContentType === \"EXTERNAL_VIDEO\" ? true : false\n      }\n      isHostedVideo={image.node.mediaContentType === \"VIDEO\" ? true : false}\n    />\n  ))\n}\n\nexport default Thumbnails\n"],"names":["isInt","val","Number","isInteger","isString","String","explode","value","delimiter","split","getExtension","path","first","second","length","third","splitFromExtension","imageUrl","extension","buildWidthHeightFilter","width","height","splitImageUrl","imageParts","beforeExtension","afterExtension","buildCropFilter","crop","buildScaleFilter","scale","addCustomSizeToImageUrl","splitParts","autoWidthAndHeight","settings","addCustomCropToImageUrl","addCustomScaleToImageUrl","isPlaceholder","src","includes","addCustomSizingToImageUrl","doFeaturedSizing","imagesSizingWidth","imagesSizingHeight","imagesSizingCrop","imagesSizingScale","doThumbnailSizing","thumbnailImagesSizingWidth","thumbnailImagesSizingHeight","thumbnailImagesSizingCrop","thumbnailImagesSizingScale","getMediaInfo","image","media","id","data","node","mediaContentType","previewImage","jsx","css","ProductGalleryContext","ProductImage","isNull","Drift","useFirstRender","ProductImageSoldOutLabel","wp","element","lazy","ProductImageOnSaleLabel","ProductFeaturedImageVideo","destroyDrift","drift","destroy","window","ProductFeaturedImage","payload","isOnSale","useEffect","useContext","useRef","useState","Suspense","paneElement","isFirstRender","galleryState","galleryDispatch","featImage","originalFeatImg","driftOptions","imageZoomOptions","inlineContainer","current","paneContainer","showZoom","linkTo","shopwp","general","productsImagesShowZoom","hasFeatImage","featImageElement","findNextImageIndex","foundIndex","edges","forEach","index","onMouseEnter","foundNextImage","type","onMouseLeave","paneElementCSS","ProductImageFeaturedWrapperCSS","imagesAlign","isOutOfStock","availableForSale","isShowingNextOnHover","featImageIsVideo","imagesShowNextOnHover","misc","isPro","undefined","showSaleNotice","saleLabelText","showOutOfStockNotice","soldOutImageLabelText","featImagePlaceholder","createContext","ProductGalleryInitialState","props","product","imagePlaceholder","alt","i18n","__","ProductGalleryReducer","ProductGalleryProvider","useReducer","state","dispatch","useMemo","rSet","action","Error","useProductState","ProductThumbnailImages","hasLink","ProductGallery","carousel","productState","hasManyImages","isFeaturedOnly","showFeaturedOnly","selectedVariant","showImagesCarousel","ProductCarouselImages","ProductGalleryWrapper","defaultGalleryCarouselSettings","ProductGalleryWrapperCSS","isSingleComponent","Img","isSelectedImage","isFeatured","sources","embeddedUrl","originalSrc","featThumbStyles","thumbnailStyles","isVideo","videoIcon","imageRef","productImageSrc","altText","title","memo","Link","placeholder","hooks","applyFilters","applyImageSizing","setProductImageSrc","url","imagesSizingToggle","thumbnailImagesSizingToggle","linkTarget","usePortal","findPortalElement","useItemsState","ProductImages","itemsState","dropzoneProductGallery","FilterHook","ProductThumbnailImage","isExternalVideo","isHostedVideo","isActive","setIsActive","ThumbnailCSS","checkIsActive","cleanup","featImageSrc","onClick","Thumbnails","mq","isEmpty","to","preloadStatus","setPreloadStatus","thumbnails","thumbnailsWrapperCSS","hasImages","preload","imageObj","Promise","resolve","reject","img","Image","onload","onerror","preloadAll","images","all","map","preloadImages","getMediaId","getMediaData"],"sourceRoot":""}