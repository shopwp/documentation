{"version":3,"file":"Quantity-public.shopwp-components.js","mappings":"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","sources":["webpack://shopwpComponents/./src/common/icons/icon-decrement.jsx","webpack://shopwpComponents/./src/common/icons/icon-increment.jsx","webpack://shopwpComponents/./src/components/quantity/index.jsx"],"sourcesContent":["/** @jsx jsx */\nimport { jsx, css } from \"@emotion/react\"\nimport { mq } from \"Common/css\"\n\nfunction QuantityDecIcon() {\n  const QuantityDecIconCSS = css`\n    position: relative;\n    content: \"\";\n    display: block;\n    height: 1px;\n    background: black;\n    width: 12px;\n    position: absolute;\n    top: calc(50% - 1px);\n    left: calc(50% - 6px);\n\n    ${mq(\"small\")} {\n      width: 20px;\n      left: calc(50% - 10px);\n    }\n  `\n\n  return (\n    <span\n      css={QuantityDecIconCSS}\n      className=\"wps-quantity-icon wps-quantity-decrement-icon\"\n    />\n  )\n}\n\nexport default QuantityDecIcon\n","/** @jsx jsx */\nimport { jsx, css } from \"@emotion/react\"\nimport { mq } from \"Common/css\"\n\nfunction QuantityIncIcon() {\n  const QuantityIncIconCSS = css`\n    position: relative;\n    display: block;\n    height: 1px;\n    background: black;\n    width: 10px;\n    position: absolute;\n    top: calc(50% - 1px);\n    left: calc(50% - 5px);\n\n    ${mq(\"small\")} {\n      width: 20px;\n      left: calc(50% - 10px);\n    }\n\n    &:after {\n      content: \"\";\n      display: block;\n      height: 1px;\n      transform: rotate(90deg);\n      background: black;\n      width: 10px;\n      position: absolute;\n      top: calc(50% - 0);\n      left: calc(50% - 5px);\n\n      ${mq(\"small\")} {\n        width: 20px;\n        left: calc(50% - 10px);\n      }\n    }\n  `\n\n  return (\n    <span\n      css={QuantityIncIconCSS}\n      className=\"wps-quantity-icon wps-quantity-increment-icon\"\n    />\n  )\n}\n\nexport default QuantityIncIcon\n","/** @jsx jsx */\nimport { jsx, css } from \"@emotion/react\"\nimport { containerFluidCSS, flexRowCSS, mq } from \"Common/css\"\nimport QuantityDecIcon from \"../../common/icons/icon-decrement\"\nimport QuantityIncIcon from \"../../common/icons/icon-increment\"\nimport { useDebounce } from \"use-debounce\"\nimport { useFirstRender } from \"Hooks\"\n\nfunction Quantity({\n  initialQuantity,\n  maxQuantity,\n  minQuantity,\n  quantityStep,\n  dispatch,\n  onChange,\n  small = true,\n  isUpdating = false,\n  lineItem = false,\n  setNotice = false,\n}) {\n  const { useState, useEffect } = wp.element\n  const [quantity, setQuantity] = useState(initialQuantity)\n  const [debouncedQuantity] = useDebounce(parseInt(quantity), 20)\n  const isFirstRender = useFirstRender()\n\n  useEffect(() => {\n    maybeShowInventoryNotice(initialQuantity)\n    setQuantity(initialQuantity)\n  }, [initialQuantity])\n\n  const quantityInputCSS = css`\n    && {\n      margin: 0;\n      width: ${small ? \"40px\" : \"45px\"};\n      height: ${small ? \"40px\" : \"45px\"};\n      border: none;\n      text-align: center;\n      font-size: 18px;\n      margin-right: 0px;\n      border-top: 1px solid #a5a5a5;\n      border-bottom: 1px solid #a5a5a5;\n      max-height: ${small ? \"40px\" : \"45px\"};\n      border-radius: 0;\n      appearance: none;\n      padding: 0;\n      color: #121212;\n      background: white;\n\n      ::-webkit-outer-spin-button,\n      ::-webkit-inner-spin-button {\n        -webkit-appearance: none;\n        margin: 0;\n      }\n\n      /* Firefox */\n      &[type=\"number\"] {\n        -moz-appearance: textfield;\n      }\n\n      &:hover {\n        cursor: ${isUpdating ? \"not-allowed\" : \"text\"};\n      }\n\n      ${mq(\"small\")} {\n        width: 60px;\n        height: 60px;\n        max-height: 60px;\n        font-size: 24px;\n      }\n    }\n  `\n\n  const QuantityIncDecCSS = css`\n    color: #333;\n    display: block;\n    margin-top: 0;\n    position: relative;\n    padding: 0 10px;\n    font-size: 17px;\n    font-family: monospace;\n    background: transparent;\n    box-shadow: none;\n    cursor: pointer;\n    text-align: center;\n    border: 1px solid #a5a5a5;\n    width: ${small ? \"45px\" : \"50px\"};\n    height: ${small ? \"40px\" : \"45px\"};\n    outline: none;\n    outline-offset: 0;\n    transition: all 0.2s ease;\n\n    &:hover {\n      background: #f1f1f1;\n    }\n\n    ${mq(\"small\")} {\n      font-size: 26px;\n      width: 60px;\n      height: 60px;\n    }\n  `\n\n  const QuantityIncCSS = css`\n    border-radius: 0 5px 5px 0;\n\n    &:hover {\n      cursor: pointer;\n      background-color: #f1f1f1;\n    }\n  `\n\n  const QuantityDecCSS = css`\n    border-radius: 5px 0 0 5px;\n\n    &:hover {\n      cursor: ${(minQuantity && quantity <= minQuantity) ||\n      isUpdating ||\n      quantity === 1\n        ? \"not-allowed\"\n        : \"pointer\"};\n\n      background-color: ${(minQuantity && quantity <= minQuantity) ||\n      isUpdating ||\n      quantity === 1\n        ? \"white\"\n        : \"#f1f1f1\"};\n    }\n  `\n\n  const quantityContainer = css`\n    width: 122px;\n    margin: 0;\n    background: white;\n\n    ${mq(\"small\")} {\n      width: 100%;\n      min-width: 160px;\n    }\n  `\n\n  function handleQuantityChange(e) {\n    if (isUpdating) {\n      return\n    }\n\n    if (e.target.value || e.target.value === 0) {\n      if (minQuantity && e.target.value <= minQuantity) {\n        var newQuantity = minQuantity\n      } else {\n        var newQuantity = e.target.value\n      }\n\n      maybeShowInventoryNotice(e.target.value)\n      setQuantity(newQuantity)\n    }\n  }\n\n  function handleDecrement() {\n    if (isUpdating) {\n      return\n    }\n\n    dispatch({\n      type: \"SET_NOTICE\",\n      payload: false,\n    })\n\n    maybeShowInventoryNotice(quantity)\n\n    if (quantity === 1 || quantity < minQuantity) {\n      dispatch({\n        type: \"SET_NOTICE\",\n        payload: {\n          type: \"warning\",\n          message: wp.i18n.sprintf(\n            wp.i18n.__(\n              \"Sorry, you must purchase a minimum of %d items for this product.\",\n              \"shopwp\"\n            ),\n            quantity\n          ),\n        },\n      })\n    } else {\n      if (!quantityStep) {\n        var newQuantity = quantity - 1\n      } else {\n        var newQuantity = quantity - quantityStep\n      }\n\n      maybeShowInventoryNotice(newQuantity)\n      setQuantity(newQuantity)\n    }\n  }\n\n  function handleIncrement() {\n    if (isUpdating) {\n      return\n    }\n    dispatch({\n      type: \"SET_NOTICE\",\n      payload: false,\n    })\n\n    if (!quantityStep) {\n      var newQuantity = quantity + 1\n    } else {\n      var newQuantity = quantity + quantityStep\n    }\n\n    maybeShowInventoryNotice(newQuantity)\n    setQuantity(newQuantity)\n  }\n\n  function maybeShowInventoryNotice(newQuantity) {\n    if (maxQuantity && newQuantity > maxQuantity) {\n      // Only show notice for cart line item quantity\n      if (setNotice && lineItem) {\n        setNotice({\n          type: \"warning\",\n          message: wp.i18n.sprintf(\n            wp.i18n.__(\n              \"Warning: the quantity you're trying to purchase may be limited to %d at checkout.\",\n              \"shopwp\"\n            ),\n            lineItem.merchandise.quantityAvailable\n          ),\n        })\n      }\n    } else {\n      if (setNotice && lineItem) {\n        setNotice(false)\n      }\n    }\n  }\n\n  useEffect(() => {\n    if (isFirstRender) {\n      return\n    }\n\n    onChange(debouncedQuantity, initialQuantity)\n  }, [debouncedQuantity])\n\n  return (\n    <div\n      className=\"wps-quantity-container\"\n      css={[containerFluidCSS, quantityContainer]}\n    >\n      <div css={[flexRowCSS]}>\n        <button\n          className=\"wps-quantity-decrement\"\n          css={[QuantityIncDecCSS, QuantityDecCSS]}\n          type=\"button\"\n          role=\"button\"\n          onClick={handleDecrement}\n        >\n          <QuantityDecIcon />\n        </button>\n\n        <input\n          className=\"wps-quantity-input\"\n          type=\"number\"\n          min={minQuantity > 1 ? minQuantity : 1}\n          onFocus={(e) => e.currentTarget.select()}\n          aria-label=\"Product Quantity Input\"\n          css={quantityInputCSS}\n          value={quantity}\n          onChange={handleQuantityChange}\n          onBlur={handleQuantityChange}\n          disabled={quantityStep}\n        />\n\n        <button\n          className=\"wps-quantity-increment\"\n          css={[QuantityIncDecCSS, QuantityIncCSS]}\n          type=\"button\"\n          role=\"button\"\n          onClick={handleIncrement}\n        >\n          <QuantityIncIcon />\n        </button>\n      </div>\n    </div>\n  )\n}\n\nexport default Quantity\n"],"names":["jsx","css","mq","QuantityDecIcon","QuantityDecIconCSS","QuantityIncIcon","QuantityIncIconCSS","containerFluidCSS","flexRowCSS","useDebounce","useFirstRender","Quantity","initialQuantity","maxQuantity","minQuantity","quantityStep","dispatch","onChange","small","isUpdating","lineItem","setNotice","wp","element","useState","useEffect","quantity","setQuantity","parseInt","debouncedQuantity","isFirstRender","maybeShowInventoryNotice","quantityInputCSS","QuantityIncDecCSS","QuantityIncCSS","QuantityDecCSS","quantityContainer","handleQuantityChange","e","target","value","newQuantity","handleDecrement","type","payload","message","i18n","sprintf","__","handleIncrement","merchandise","quantityAvailable","currentTarget","select"],"sourceRoot":""}