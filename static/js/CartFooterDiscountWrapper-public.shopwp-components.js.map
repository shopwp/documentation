{"version":3,"file":"CartFooterDiscountWrapper-public.shopwp-components.js","mappings":"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","sources":["webpack://shopwpComponents/./src/components/cart/footer/discount-wrapper/index.jsx","webpack://shopwpComponents/./src/components/cart/footer/discount/index.jsx"],"sourcesContent":["/** @jsx jsx */\nimport { jsx, css } from \"@emotion/react\"\nimport { addDiscount } from \"../../api.jsx\"\nimport { useCartDispatch, useCartState } from \"../../_state/hooks\"\nimport { useShopState, useShopDispatch } from \"../../../shop/_state/hooks\"\nimport CartFooterDiscount from \"../discount\"\nimport useIsMounted from \"ismounted\"\n\nconst Loader = wp.element.lazy(() =>\n  import(/* webpackChunkName: 'Loader-public' */ \"../../../loader\")\n)\n\nfunction CartFooterDiscountWrapper() {\n  const { useRef, useState, useEffect } = wp.element\n\n  const isMounted = useIsMounted()\n  const cartState = useCartState()\n  const shopState = useShopState()\n  const shopDispatch = useShopDispatch()\n  const cartDispatch = useCartDispatch()\n\n  const discountInputRef = useRef(false)\n\n  const [discountCode, setDiscountCode] = useState(cartState.discountCode)\n\n  useEffect(() => {\n    if (isMounted.current) {\n      setDiscountCode(cartState.discountCode ? cartState.discountCode : \"\")\n    }\n  }, [cartState.discountCode])\n\n  const discountCSS = css`\n    display: flex;\n    align-items: flex-end;\n    justify-content: space-between;\n    margin: 0;\n  `\n\n  const discountFormCSS = css`\n    display: flex;\n    width: 100%;\n    margin-bottom: 20px;\n  `\n\n  const discountFormInputCSS = css`\n    && {\n      appearance: none;\n      background: transparent;\n      flex: 1;\n      font-size: 15px;\n      padding: 10px;\n      margin-right: 10px;\n      border-radius: 5px;\n      border: 1px solid #7e7e7e;\n      outline: none;\n      color: #121212;\n      box-shadow: none;\n      text-transform: uppercase;\n\n      ::placeholder,\n      ::-webkit-input-placeholder {\n        text-transform: capitalize;\n        color: #969696;\n      }\n\n      &:disabled {\n        &:hover {\n          cursor: not-allowed;\n        }\n      }\n    }\n  `\n\n  const discountFormButtonCSS = css`\n    width: 100px;\n    font-size: 16px;\n    border-radius: 5px;\n    border: 1px solid #7e7e7e;\n    appearance: none;\n    color: black;\n    background: white;\n    padding: 0;\n\n    &:hover {\n      cursor: ${shopState.isCartUpdating ? \"not-allowed\" : \"pointer\"};\n      color: rgba(0, 0, 0, 0.5);\n      background: white;\n    }\n\n    &:focus {\n      outline: none;\n    }\n\n    &:disabled {\n      color: #c4c4c4;\n\n      &:hover {\n        cursor: not-allowed;\n      }\n    }\n\n    .ball-pulse > div {\n      background: black !important;\n      width: 8px !important;\n      height: 8px !important;\n    }\n  `\n\n  function changeDiscount(discount) {\n    if (!cartState.isAddingDiscountCode) {\n      addDiscount(cartDispatch, shopState, discount, shopDispatch)\n    }\n  }\n\n  function onAddDiscount(e) {\n    changeDiscount(discountInputRef.current.value.toUpperCase())\n  }\n\n  function onKeyDown(event) {\n    if (event.key === \"Enter\") {\n      changeDiscount(discountInputRef.current.value.toUpperCase())\n    }\n  }\n\n  function onChange(e) {\n    setDiscountCode(e.target.value)\n  }\n\n  return (\n    <div css={discountCSS} className=\"wps-discount-row\">\n      {!cartState.discountCode ? (\n        <div css={discountFormCSS}>\n          <input\n            type=\"text\"\n            placeholder={wp.i18n.__(\"Discount code\", \"shopwp\")}\n            ref={discountInputRef}\n            css={discountFormInputCSS}\n            disabled={shopState.isCartUpdating || cartState.isCartEmpty}\n            onKeyDown={onKeyDown}\n            onChange={onChange}\n            value={discountCode}\n          />\n          <button\n            css={discountFormButtonCSS}\n            onClick={onAddDiscount}\n            disabled={\n              shopState.isCartUpdating || cartState.isCartEmpty || !discountCode\n            }\n          >\n            {!cartState.isAddingDiscountCode && (\n              <span>{wp.i18n.__(\"Apply\", \"shopwp\")}</span>\n            )}\n            {cartState.isAddingDiscountCode && <Loader />}\n          </button>\n        </div>\n      ) : shopState.cartData.discountCodes.length ? (\n        <CartFooterDiscount\n          discountCode={shopState.cartData.discountCodes[0].code}\n          changeDiscount={changeDiscount}\n        />\n      ) : null}\n    </div>\n  )\n}\n\nexport default CartFooterDiscountWrapper\n","/** @jsx jsx */\nimport { jsx, css } from \"@emotion/react\"\n\nfunction CartFooterDiscount({ discountCode, changeDiscount }) {\n  const discountCodeWrapperCSS = css`\n    display: flex;\n    align-items: baseline;\n    width: 100%;\n    justify-content: flex-start;\n    margin-bottom: 10px;\n    border-bottom: 1px solid #ddd;\n    padding-bottom: 12px;\n  `\n\n  const discountLabelCSS = css`\n    && {\n      flex: 1;\n      font-size: 15px;\n      position: relative;\n      top: 2px;\n      margin-right: 15px;\n    }\n  `\n\n  const discountCodeCSS = css`\n    font-size: 15px;\n    font-family: monospace;\n    text-transform: uppercase;\n    background: #ffd864;\n    padding: 3px 30px 3px 10px;\n    position: relative;\n    transition: background ease 0.2s;\n    outline: 2px dashed #d9833a;\n\n    &:hover {\n      cursor: pointer;\n      background: #f1c952;\n    }\n  `\n\n  const discountCodeIconCSS = css`\n    position: absolute;\n    right: 11px;\n    top: 4px;\n    max-width: 9px;\n  `\n\n  async function onRemoval() {\n    changeDiscount(\"\")\n  }\n\n  return (\n    <div css={discountCodeWrapperCSS}>\n      <p css={discountLabelCSS} className=\"wps-cart-discount-label\">\n        {wp.i18n.__(\"Discount applied:\", \"shopwp\")}\n      </p>\n\n      <p\n        className=\"wps-cart-discount-code\"\n        css={discountCodeCSS}\n        onClick={onRemoval}\n      >\n        {discountCode}\n\n        <svg\n          css={discountCodeIconCSS}\n          aria-hidden=\"true\"\n          focusable=\"false\"\n          data-prefix=\"far\"\n          data-icon=\"times\"\n          className=\"svg-inline--fa fa-times fa-w-10\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          viewBox=\"0 0 320 512\"\n        >\n          <path\n            fill=\"currentColor\"\n            d=\"M207.6 256l107.72-107.72c6.23-6.23 6.23-16.34 0-22.58l-25.03-25.03c-6.23-6.23-16.34-6.23-22.58 0L160 208.4 52.28 100.68c-6.23-6.23-16.34-6.23-22.58 0L4.68 125.7c-6.23 6.23-6.23 16.34 0 22.58L112.4 256 4.68 363.72c-6.23 6.23-6.23 16.34 0 22.58l25.03 25.03c6.23 6.23 16.34 6.23 22.58 0L160 303.6l107.72 107.72c6.23 6.23 16.34 6.23 22.58 0l25.03-25.03c6.23-6.23 6.23-16.34 0-22.58L207.6 256z\"\n          ></path>\n        </svg>\n      </p>\n    </div>\n  )\n}\n\nexport default CartFooterDiscount\n"],"names":["jsx","css","addDiscount","useCartDispatch","useCartState","useShopState","useShopDispatch","CartFooterDiscount","useIsMounted","Loader","wp","element","lazy","CartFooterDiscountWrapper","useRef","useState","useEffect","isMounted","cartState","shopState","shopDispatch","cartDispatch","discountInputRef","discountCode","setDiscountCode","current","discountCSS","discountFormCSS","discountFormInputCSS","discountFormButtonCSS","isCartUpdating","changeDiscount","discount","isAddingDiscountCode","onAddDiscount","e","value","toUpperCase","onKeyDown","event","key","onChange","target","i18n","__","isCartEmpty","cartData","discountCodes","length","code","discountCodeWrapperCSS","discountLabelCSS","discountCodeCSS","discountCodeIconCSS","onRemoval"],"sourceRoot":""}