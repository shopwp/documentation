{"version":3,"file":"CartNote-public.shopwp-components.js","mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;AAEA,SAASS,QAAT,GAAoB;AAClB,oBAAwCC,EAAE,CAACC,OAA3C;AAAA,MAAQC,QAAR,qCAAQA,QAAR;AAAA,MAAkBC,MAAlB,qCAAkBA,MAAlB;AAAA,MAA0BC,SAA1B,qCAA0BA,SAA1B;AACA,MAAMC,SAAS,GAAGb,+DAAY,EAA9B;AACA,MAAMc,YAAY,GAAGb,kEAAe,EAApC;AACA,MAAMc,SAAS,GAAGb,0DAAY,EAA9B;AACA,MAAMc,YAAY,GAAGb,6DAAe,EAApC;AACA,MAAMc,YAAY,GAAGN,MAAM,EAA3B;;AACA,kBAAkCD,QAAQ,CAACG,SAAS,CAACK,QAAV,CAAmBC,IAApB,CAA1C;AAAA;AAAA,MAAOC,SAAP;AAAA,MAAkBC,YAAlB;;AAEA,qBAAyBjB,wDAAW,CAACgB,SAAD,EAAY,GAAZ,CAApC;AAAA;AAAA,MAAOE,cAAP;;AACA,MAAMC,aAAa,GAAGjB,qDAAc,EAApC;AAEAM,EAAAA,SAAS,CAAC,YAAM;AACd,QAAIW,aAAJ,EAAmB;AACjB;AACD;;AAED,QAAIV,SAAS,CAACK,QAAV,CAAmBC,IAAnB,KAA4BG,cAAhC,EAAgD;AAC9C;AACD;;AAEDR,IAAAA,YAAY,CAAC;AAAEU,MAAAA,IAAI,EAAE,sBAAR;AAAgCC,MAAAA,OAAO,EAAE;AAAzC,KAAD,CAAZ;AAEApB,IAAAA,wDAAc,CACZiB,cADY,EAEZT,SAFY,EAGZG,YAHY,EAIZC,YAJY,EAKZH,YALY,CAAd;AAOD,GAlBQ,EAkBN,CAACQ,cAAD,CAlBM,CAAT;AAoBAV,EAAAA,SAAS,CAAC,YAAM;AACd,QAAIC,SAAS,CAACK,QAAV,CAAmBC,IAAvB,EAA6B;AAC3BE,MAAAA,YAAY,CAACR,SAAS,CAACK,QAAV,CAAmBC,IAApB,CAAZ;AACD;AACF,GAJQ,EAIN,CAACN,SAAS,CAACK,QAAV,CAAmBC,IAApB,CAJM,CAAT;;AAMA,WAASO,QAAT,CAAkBC,CAAlB,EAAqB;AACnB,QAAId,SAAS,CAACe,cAAd,EAA8B;AAC5B;AACD;;AACDP,IAAAA,YAAY,CAACM,CAAC,CAACE,MAAF,CAASC,KAAV,CAAZ;AACD;;AAED,MAAMC,YAAY,QAAlB;AAaA,MAAMC,eAAe,OAArB;AAkBA,SACE;AAAS,aAAS,EAAC,gBAAnB;AAAoC,OAAG,EAAED;AAAzC,KACE;AAAO,WAAO,EAAC;AAAf,KAAkChB,SAAS,CAACkB,QAAV,CAAmBC,UAArD,CADF,EAEE;AACE,OAAG,EAAEF,eADP;AAEE,eAAW,EAAEjB,SAAS,CAACkB,QAAV,CAAmBE,gBAFlC;AAGE,MAAE,EAAC,iBAHL;AAIE,aAAS,EAAC,8BAJZ;AAKE,SAAK,EAAEf,SALT;AAME,YAAQ,EAAEM,QANZ;AAOE,OAAG,EAAET,YAPP;AAQE,YAAQ,EAAEJ,SAAS,CAACe;AARtB,IAFF,CADF;AAeD;;AAED,+DAAerB,QAAf","sources":["webpack://shopwpComponents/./src/components/cart/note/index.jsx"],"sourcesContent":["/** @jsx jsx */\nimport { jsx, css } from \"@emotion/react\"\nimport { useShopState, useShopDispatch } from \"../../shop/_state/hooks\"\nimport { useCartState, useCartDispatch } from \"../_state/hooks\"\nimport { useDebounce } from \"use-debounce\"\nimport { updateCartNote } from \"../api.jsx\"\nimport { useFirstRender } from \"Hooks\"\n\nfunction CartNote() {\n  const { useState, useRef, useEffect } = wp.element\n  const shopState = useShopState()\n  const shopDispatch = useShopDispatch()\n  const cartState = useCartState()\n  const cartDispatch = useCartDispatch()\n  const inputElement = useRef()\n  const [noteValue, setNoteValue] = useState(shopState.cartData.note)\n\n  const [debouncedValue] = useDebounce(noteValue, 450)\n  const isFirstRender = useFirstRender()\n\n  useEffect(() => {\n    if (isFirstRender) {\n      return\n    }\n\n    if (shopState.cartData.note === debouncedValue) {\n      return\n    }\n\n    shopDispatch({ type: \"SET_IS_CART_UPDATING\", payload: true })\n\n    updateCartNote(\n      debouncedValue,\n      shopState,\n      cartDispatch,\n      inputElement,\n      shopDispatch\n    )\n  }, [debouncedValue])\n\n  useEffect(() => {\n    if (shopState.cartData.note) {\n      setNoteValue(shopState.cartData.note)\n    }\n  }, [shopState.cartData.note])\n\n  function onChange(e) {\n    if (shopState.isCartUpdating) {\n      return\n    }\n    setNoteValue(e.target.value)\n  }\n\n  const CartNotesCSS = css`\n    margin-bottom: 0.5em;\n    padding: 0;\n    font-weight: none;\n    color: #121212;\n\n    label {\n      font-size: 15px;\n      display: block;\n      margin-bottom: 5px;\n    }\n  `\n\n  const CartTextareaCSS = css`\n    width: 100%;\n    color: #121212;\n    display: block;\n    font-size: 15px;\n    padding: 10px;\n    border-color: #7e7e7e;\n    appearance: none;\n    font-family: inherit;\n    border-radius: 5px;\n    min-height: 100px;\n\n    ::placeholder,\n    ::-webkit-input-placeholder {\n      color: #969696;\n    }\n  `\n\n  return (\n    <section className=\"wps-cart-notes\" css={CartNotesCSS}>\n      <label htmlFor=\"wps-input-notes\">{cartState.settings.notesLabel}</label>\n      <textarea\n        css={CartTextareaCSS}\n        placeholder={cartState.settings.notesPlaceholder}\n        id=\"wps-input-notes\"\n        className=\"wps-input wps-input-textarea\"\n        value={noteValue}\n        onChange={onChange}\n        ref={inputElement}\n        disabled={shopState.isCartUpdating}\n      />\n    </section>\n  )\n}\n\nexport default CartNote\n"],"names":["jsx","css","useShopState","useShopDispatch","useCartState","useCartDispatch","useDebounce","updateCartNote","useFirstRender","CartNote","wp","element","useState","useRef","useEffect","shopState","shopDispatch","cartState","cartDispatch","inputElement","cartData","note","noteValue","setNoteValue","debouncedValue","isFirstRender","type","payload","onChange","e","isCartUpdating","target","value","CartNotesCSS","CartTextareaCSS","settings","notesLabel","notesPlaceholder"],"sourceRoot":""}